{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/components/RideMap.tsx"],"sourcesContent":["import { MapContainer, TileLayer, Marker, Polyline } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\ninterface RideMapProps {\r\n  start?: { lat: number | string; lng: number | string } | null;\r\n  dest?: { lat: number | string; lng: number | string } | null;\r\n  height?: number | string;\r\n  isReadOnly?: boolean; // New prop to disable interactions\r\n}\r\n\r\nconst BENGALURU_CENTER = { lat: 12.9716, lng: 77.5946 };\r\nconst BENGALURU_BOUNDS: [[number, number], [number, number]] = [\r\n  [12.8, 77.4],\r\n  [13.1, 77.8],\r\n];\r\n\r\nfunction toPoint(p?: { lat: number | string; lng: number | string } | null) {\r\n  if (!p) return null;\r\n  const lat = typeof p.lat === \"string\" ? parseFloat(p.lat) : p.lat;\r\n  const lng = typeof p.lng === \"string\" ? parseFloat(p.lng) : p.lng;\r\n  if (!Number.isFinite(lat) || !Number.isFinite(lng)) return null;\r\n  return { lat, lng } as { lat: number; lng: number };\r\n}\r\n\r\nexport default function RideMap({\r\n  start,\r\n  dest,\r\n  height = 300,\r\n  isReadOnly = false,\r\n}: RideMapProps) {\r\n  const s = toPoint(start);\r\n  const d = toPoint(dest);\r\n  if (!s || !d) return null;\r\n\r\n  function clampToBounds(point: { lat: number; lng: number }) {\r\n    const clampedLat = Math.max(\r\n      BENGALURU_BOUNDS[0][0],\r\n      Math.min(BENGALURU_BOUNDS[1][0], point.lat)\r\n    );\r\n    const clampedLng = Math.max(\r\n      BENGALURU_BOUNDS[0][1],\r\n      Math.min(BENGALURU_BOUNDS[1][1], point.lng)\r\n    );\r\n    return { lat: clampedLat, lng: clampedLng };\r\n  }\r\n\r\n  const center = clampToBounds({\r\n    lat: (s.lat + d.lat) / 2,\r\n    lng: (s.lng + d.lng) / 2,\r\n  });\r\n\r\n  console.log(\"Start Point:\", s);\r\n  console.log(\"Destination Point:\", d);\r\n  console.log(\"Calculated Center:\", center);\r\n  console.log(\"Bangalore Bounds:\", BENGALURU_BOUNDS);\r\n\r\n  return (\r\n    <div style={{ width: \"100%\", height }}>\r\n      <MapContainer\r\n        center={center}\r\n        zoom={13}\r\n        style={{ width: \"100%\", height: \"100%\", borderRadius: 12 }}\r\n        maxBounds={BENGALURU_BOUNDS}\r\n        minZoom={11}\r\n        maxZoom={18}\r\n        scrollWheelZoom={!isReadOnly} // Disable scroll zoom if read-only\r\n        dragging={!isReadOnly} // Disable dragging if read-only\r\n        maxBoundsViscosity={1.0}\r\n      >\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        <Marker\r\n          position={s}\r\n          icon={new window.L.DivIcon({\r\n            html: `<img src='/assets/RedIcon.png' style='width:25px;height:41px;' alt='Start Icon' />`,\r\n            className: \"custom-marker\",\r\n          })}\r\n        />\r\n        <Marker\r\n          position={d}\r\n          icon={new window.L.DivIcon({\r\n            html: `<img src='/assets/GreenIcon.png' style='width:25px;height:41px;' alt='Destination Icon' />`,\r\n            className: \"custom-marker\",\r\n          })}\r\n        />\r\n        <Polyline\r\n          positions={[\r\n            [s.lat, s.lng],\r\n            [d.lat, d.lng],\r\n          ]}\r\n          color=\"blue\"\r\n        />\r\n      </MapContainer>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;;;;AAUA,MAAM,mBAAmB;IAAE,KAAK;IAAS,KAAK;AAAQ;AACtD,MAAM,mBAAyD;IAC7D;QAAC;QAAM;KAAK;IACZ;QAAC;QAAM;KAAK;CACb;AAED,SAAS,QAAQ,CAAyD;IACxE,IAAI,CAAC,GAAG,OAAO;IACf,MAAM,MAAM,OAAO,EAAE,GAAG,KAAK,WAAW,WAAW,EAAE,GAAG,IAAI,EAAE,GAAG;IACjE,MAAM,MAAM,OAAO,EAAE,GAAG,KAAK,WAAW,WAAW,EAAE,GAAG,IAAI,EAAE,GAAG;IACjE,IAAI,CAAC,OAAO,QAAQ,CAAC,QAAQ,CAAC,OAAO,QAAQ,CAAC,MAAM,OAAO;IAC3D,OAAO;QAAE;QAAK;IAAI;AACpB;AAEe,SAAS,QAAQ,KAKjB;QALiB,EAC9B,KAAK,EACL,IAAI,EACJ,SAAS,GAAG,EACZ,aAAa,KAAK,EACL,GALiB;IAM9B,MAAM,IAAI,QAAQ;IAClB,MAAM,IAAI,QAAQ;IAClB,IAAI,CAAC,KAAK,CAAC,GAAG,OAAO;IAErB,SAAS,cAAc,KAAmC;QACxD,MAAM,aAAa,KAAK,GAAG,CACzB,gBAAgB,CAAC,EAAE,CAAC,EAAE,EACtB,KAAK,GAAG,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE,EAAE,MAAM,GAAG;QAE5C,MAAM,aAAa,KAAK,GAAG,CACzB,gBAAgB,CAAC,EAAE,CAAC,EAAE,EACtB,KAAK,GAAG,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE,EAAE,MAAM,GAAG;QAE5C,OAAO;YAAE,KAAK;YAAY,KAAK;QAAW;IAC5C;IAEA,MAAM,SAAS,cAAc;QAC3B,KAAK,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI;QACvB,KAAK,CAAC,EAAE,GAAG,GAAG,EAAE,GAAG,IAAI;IACzB;IAEA,QAAQ,GAAG,CAAC,gBAAgB;IAC5B,QAAQ,GAAG,CAAC,sBAAsB;IAClC,QAAQ,GAAG,CAAC,sBAAsB;IAClC,QAAQ,GAAG,CAAC,qBAAqB;IAEjC,qBACE,6LAAC;QAAI,OAAO;YAAE,OAAO;YAAQ;QAAO;kBAClC,cAAA,6LAAC,0JAAA,CAAA,eAAY;YACX,QAAQ;YACR,MAAM;YACN,OAAO;gBAAE,OAAO;gBAAQ,QAAQ;gBAAQ,cAAc;YAAG;YACzD,WAAW;YACX,SAAS;YACT,SAAS;YACT,iBAAiB,CAAC;YAClB,UAAU,CAAC;YACX,oBAAoB;;8BAEpB,6LAAC,uJAAA,CAAA,YAAS;oBACR,aAAY;oBACZ,KAAI;;;;;;8BAEN,6LAAC,oJAAA,CAAA,SAAM;oBACL,UAAU;oBACV,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,CAAC;wBACzB,MAAO;wBACP,WAAW;oBACb;;;;;;8BAEF,6LAAC,oJAAA,CAAA,SAAM;oBACL,UAAU;oBACV,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,CAAC;wBACzB,MAAO;wBACP,WAAW;oBACb;;;;;;8BAEF,6LAAC,sJAAA,CAAA,WAAQ;oBACP,WAAW;wBACT;4BAAC,EAAE,GAAG;4BAAE,EAAE,GAAG;yBAAC;wBACd;4BAAC,EAAE,GAAG;4BAAE,EAAE,GAAG;yBAAC;qBACf;oBACD,OAAM;;;;;;;;;;;;;;;;;AAKhB;KAzEwB","debugId":null}}]
}
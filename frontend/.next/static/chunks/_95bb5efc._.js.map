{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/hostparty/page.tsx"],"sourcesContent":["// src/app/hostparty/page.tsx\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\n\r\nexport default function HostPartyPage() {\r\n  const router = useRouter();\r\n  const supabase = createClient();\r\n\r\n  const [partySize, setPartySize] = useState(0);\r\n  const [meetupPoint, setMeetupPoint] = useState(\"\");\r\n  const [dropOff, setDropOff] = useState(\"\");\r\n  const [isFriendsOnly, setIsFriendsOnly] = useState(false);\r\n  const [isGenderOnly, setIsGenderOnly] = useState(false);\r\n  const [selectedRides, setSelectedRides] = useState<string[]>([]);\r\n  const [expiresIn, setExpiresIn] = useState(\"15\"); // default 15 mins\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n\r\n  // ✅ Properly fetch current user once\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      const { data, error } = await supabase.auth.getUser();\r\n      if (error) {\r\n        console.error(\"Error fetching user:\", error.message);\r\n      } else if (data?.user) {\r\n        setUserId(data.user.id);\r\n      }\r\n    };\r\n    getUser();\r\n  }, [supabase]);\r\n\r\n  const handleStartParty = async () => {\r\n    if (!meetupPoint || !dropOff || partySize === 0) {\r\n      alert(\"Please fill out the meetup point, drop-off, and set a party size.\");\r\n      return;\r\n    }\r\n\r\n    if (!userId) {\r\n      alert(\"You must be logged in to host a party.\");\r\n      return;\r\n    }\r\n\r\n    const now = new Date();\r\n    const minutesToAdd = parseInt(expiresIn, 10);\r\n    const endTime = new Date(now.getTime() + minutesToAdd * 60000);\r\n\r\n    const { error } = await supabase.from(\"parties\").insert([\r\n      {\r\n        host_id: userId,\r\n        party_size: partySize,\r\n        seats_available: partySize - 1, // host takes 1 seat\r\n        meetup_point: meetupPoint,\r\n        drop_off: dropOff,\r\n        friends_only: isFriendsOnly,\r\n        gender_only: isGenderOnly,\r\n        ride_options: selectedRides,\r\n        expires_in: expiresIn,\r\n        is_active: true,\r\n        start_time: now.toISOString(),\r\n        end_time: endTime.toISOString(),\r\n        status: \"waiting\",\r\n        created_at: now.toISOString(),\r\n      },\r\n    ]);\r\n\r\n    if (error) {\r\n      console.error(error);\r\n      alert(error.message);\r\n    } else {\r\n      alert(\"✅ Party created!\");\r\n      router.push(\"/dashboard\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto mt-10 p-6 bg-card rounded-xl shadow-md\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">Host a Ride</h1>\r\n\r\n      {/* Meetup Point */}\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Enter meetup point\"\r\n        value={meetupPoint}\r\n        onChange={(e) => setMeetupPoint(e.target.value)}\r\n        className=\"w-full p-2 mb-4 border rounded-md\"\r\n      />\r\n\r\n      {/* Drop Off */}\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Enter drop-off location\"\r\n        value={dropOff}\r\n        onChange={(e) => setDropOff(e.target.value)}\r\n        className=\"w-full p-2 mb-4 border rounded-md\"\r\n      />\r\n\r\n      {/* Party Size */}\r\n      <input\r\n        type=\"number\"\r\n        min=\"1\"\r\n        placeholder=\"Enter party size\"\r\n        value={partySize}\r\n        onChange={(e) => setPartySize(parseInt(e.target.value, 10))}\r\n        className=\"w-full p-2 mb-4 border rounded-md\"\r\n      />\r\n\r\n      {/* Ride Options */}\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Ride options (comma separated)\"\r\n        value={selectedRides.join(\",\")}\r\n        onChange={(e) =>\r\n          setSelectedRides(\r\n            e.target.value.split(\",\").map((opt) => opt.trim())\r\n          )\r\n        }\r\n        className=\"w-full p-2 mb-4 border rounded-md\"\r\n      />\r\n\r\n      {/* Friends Only */}\r\n      <label className=\"flex items-center gap-2 mb-4\">\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={isFriendsOnly}\r\n          onChange={(e) => setIsFriendsOnly(e.target.checked)}\r\n        />\r\n        Friends only\r\n      </label>\r\n\r\n      {/* Gender Only */}\r\n      <label className=\"flex items-center gap-2 mb-4\">\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={isGenderOnly}\r\n          onChange={(e) => setIsGenderOnly(e.target.checked)}\r\n        />\r\n        Gender only\r\n      </label>\r\n\r\n      {/* Expires In */}\r\n      <select\r\n        value={expiresIn}\r\n        onChange={(e) => setExpiresIn(e.target.value)}\r\n        className=\"w-full p-2 mb-6 border rounded-md\"\r\n      >\r\n        <option value=\"10\">10 minutes</option>\r\n        <option value=\"15\">15 minutes</option>\r\n        <option value=\"30\">30 minutes</option>\r\n        <option value=\"60\">1 hour</option>\r\n      </select>\r\n\r\n      {/* Submit Button */}\r\n      <button\r\n        onClick={handleStartParty}\r\n        className=\"w-full px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition\"\r\n      >\r\n        Start Ride\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}
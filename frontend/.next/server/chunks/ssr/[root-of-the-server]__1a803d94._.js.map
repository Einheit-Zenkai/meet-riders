{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/lib/supabaseClient.ts"],"sourcesContent":["// Inside: frontend/src/lib/supabaseClient.ts\r\n\r\nimport { createClient } from '@supabase/supabase-js'\r\n\r\n// The '!' tells TypeScript that we are sure these variables exist from your .env.local file\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)"],"names":[],"mappings":"AAAA,6CAA6C;;;;AAE7C;;AAEA,4FAA4F;AAC5F,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/hostparty/page.tsx"],"sourcesContent":["// frontend/src/app/hostparty/page.tsx\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { User, Bus, Car, CarTaxiFront, Footprints, AlertCircle } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabaseClient\"; // ✅ adjust path if needed\r\n\r\nconst rideOptions = [\r\n  { name: \"On Foot\", icon: Footprints },\r\n  { name: \"Auto\", icon: CarTaxiFront },\r\n  { name: \"Cab\", icon: Car },\r\n  { name: \"Bus\", icon: Bus },\r\n  { name: \"SUV\", icon: Car },\r\n];\r\n\r\nexport default function HostPartyPage() {\r\n  const router = useRouter();\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n  const [isAlreadyHosting, setIsAlreadyHosting] = useState(false);\r\n\r\n  // Form state\r\n  const [partySize, setPartySize] = useState(1);\r\n  const [meetupPoint, setMeetupPoint] = useState(\"\");\r\n  const [dropOff, setDropOff] = useState(\"\");\r\n  const [isFriendsOnly, setIsFriendsOnly] = useState(false);\r\n  const [isGenderOnly, setIsGenderOnly] = useState(false);\r\n  const [selectedRides, setSelectedRides] = useState<string[]>([]);\r\n  const [expiresIn, setExpiresIn] = useState(\"10 min\");\r\n\r\n  // ✅ Fetch logged-in user & check if already hosting\r\n  useEffect(() => {\r\n    const getUserAndCheckParty = async () => {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        router.push(\"/login\");\r\n        return;\r\n      }\r\n\r\n      setUserId(user.id);\r\n\r\n      // check if user is already hosting\r\n      const { data, error } = await supabase\r\n        .from(\"parties\")\r\n        .select(\"id\")\r\n        .eq(\"host_id\", user.id)\r\n        .eq(\"is_active\", true) // assuming you track active status\r\n        .single();\r\n\r\n      if (data) setIsAlreadyHosting(true);\r\n    };\r\n\r\n    getUserAndCheckParty();\r\n  }, [router]);\r\n\r\n  // Handlers\r\n  const handlePartySizeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let newSize = parseInt(e.target.value, 10) || 0;\r\n    if (newSize > 7) newSize = 7;\r\n    if (newSize < 0) newSize = 0;\r\n    setPartySize(newSize);\r\n  };\r\n\r\n  const handleRemoveMember = () => {\r\n    if (partySize > 0) setPartySize(partySize - 1);\r\n  };\r\n\r\n  const handleRideToggle = (rideName: string) => {\r\n    if (selectedRides.includes(rideName)) {\r\n      setSelectedRides(selectedRides.filter((r) => r !== rideName));\r\n    } else {\r\n      if (selectedRides.length < 2) {\r\n        setSelectedRides([...selectedRides, rideName]);\r\n      } else {\r\n        alert(\"You can only select a maximum of 2 ride options.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleStartParty = async () => {\r\n    if (!meetupPoint || !dropOff || partySize === 0) {\r\n      alert(\"Please fill out the meetup point, drop-off, and set a party size.\");\r\n      return;\r\n    }\r\n\r\n    if (!userId) {\r\n      alert(\"You must be logged in to host a party.\");\r\n      return;\r\n    }\r\n\r\n    const { error } = await supabase.from(\"parties\").insert([\r\n      {\r\n        host_id: userId,\r\n        party_size: partySize,\r\n        meetup_point: meetupPoint,\r\n        drop_off: dropOff,\r\n        friends_only: isFriendsOnly,\r\n        gender_only: isGenderOnly,\r\n        ride_options: selectedRides,\r\n        expires_in: expiresIn,\r\n        is_active: true,\r\n      },\r\n    ]);\r\n\r\n    if (error) {\r\n      console.error(error);\r\n      alert(error.message);\r\n    } else {\r\n      alert(\"✅ Party created!\");\r\n      router.push(\"/dashboard\");\r\n    }\r\n  };\r\n\r\n  // --- Conditional rendering if already hosting ---\r\n  if (isAlreadyHosting) {\r\n    return (\r\n      <div className=\"p-8 max-w-2xl mx-auto text-center mt-10\">\r\n        <div className=\"bg-card p-8 rounded-lg shadow-md border\">\r\n          <AlertCircle className=\"w-16 h-16 mx-auto text-primary mb-4\" />\r\n          <h1 className=\"text-2xl font-bold text-card-foreground mb-2\">\r\n            You're Already Hosting!\r\n          </h1>\r\n          <p className=\"text-muted-foreground mb-6\">\r\n            You can only host one ride at a time. Please cancel your existing\r\n            ride from the homepage if you wish to create a new one.\r\n          </p>\r\n          <Link\r\n            href=\"/\"\r\n            className=\"inline-block px-8 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition-colors\"\r\n          >\r\n            Back to Homepage\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- Party creation form ---\r\n  return (\r\n    <div className=\"p-8 max-w-4xl mx-auto\">\r\n      <Link\r\n        href=\"/\"\r\n        className=\"inline-block mb-8 px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors font-medium\"\r\n      >\r\n        ← Back\r\n      </Link>\r\n\r\n      <div className=\"space-y-10\">\r\n        <h1 className=\"text-3xl font-bold text-foreground\">Host a Party</h1>\r\n\r\n        {/* Party Size */}\r\n        <div className=\"space-y-4\">\r\n          <label className=\"text-xl font-semibold text-foreground\">\r\n            Max party size\r\n          </label>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <input\r\n              type=\"number\"\r\n              value={partySize}\r\n              onChange={handlePartySizeChange}\r\n              className=\"w-20 p-2 border-2 border-input rounded-lg text-center text-lg bg-background\"\r\n              min=\"1\"\r\n              max=\"7\"\r\n            />\r\n            <div className=\"flex items-center space-x-2\">\r\n              {Array.from({ length: partySize }).map((_, index) => (\r\n                <User\r\n                  key={index}\r\n                  className=\"w-8 h-8 text-muted-foreground cursor-pointer\"\r\n                  onClick={handleRemoveMember}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Meetup Point */}\r\n        <div className=\"space-y-2\">\r\n          <label\r\n            htmlFor=\"meetup\"\r\n            className=\"text-xl font-semibold text-foreground\"\r\n          >\r\n            Meetup point\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"meetup\"\r\n            placeholder=\"Enter the full meeting address\"\r\n            className=\"w-full p-3 border-2 border-input rounded-lg bg-background\"\r\n            value={meetupPoint}\r\n            onChange={(e) => setMeetupPoint(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {/* Dropoff */}\r\n        <div className=\"space-y-2\">\r\n          <label\r\n            htmlFor=\"dropoff\"\r\n            className=\"text-xl font-semibold text-foreground\"\r\n          >\r\n            Your (host) drop location\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"dropoff\"\r\n            placeholder=\"Enter your final destination address\"\r\n            className=\"w-full p-3 border-2 border-input rounded-lg bg-background\"\r\n            value={dropOff}\r\n            onChange={(e) => setDropOff(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {/* Privacy */}\r\n        <div className=\"space-y-4\">\r\n          <h2 className=\"text-xl font-semibold text-foreground\">Privacy</h2>\r\n          <div className=\"flex flex-col space-y-3\">\r\n            <label className=\"flex items-center space-x-3 cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"h-5 w-5 rounded text-primary focus:ring-ring\"\r\n                checked={isFriendsOnly}\r\n                onChange={(e) => setIsFriendsOnly(e.target.checked)}\r\n              />\r\n              <span className=\"text-foreground\">Friends only (Private Party)</span>\r\n            </label>\r\n            <label className=\"flex items-center space-x-3 cursor-pointer\">\r\n              <input\r\n                type=\"checkbox\"\r\n                className=\"h-5 w-5 rounded text-primary focus:ring-ring\"\r\n                checked={isGenderOnly}\r\n                onChange={(e) => setIsGenderOnly(e.target.checked)}\r\n              />\r\n              <span className=\"text-foreground\">Your gender only</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Ride Options */}\r\n        <div className=\"space-y-4\">\r\n          <label className=\"text-xl font-semibold text-foreground\">\r\n            Ideal ride from destination\r\n          </label>\r\n          <div className=\"flex flex-wrap gap-3\">\r\n            {rideOptions.map((ride) => (\r\n              <button\r\n                key={ride.name}\r\n                onClick={() => handleRideToggle(ride.name)}\r\n                className={`flex items-center space-x-2 px-4 py-2 rounded-full border-2 transition-colors ${\r\n                  selectedRides.includes(ride.name)\r\n                    ? \"bg-primary text-primary-foreground border-primary\"\r\n                    : \"bg-background text-foreground border-input hover:border-foreground/50\"\r\n                }`}\r\n              >\r\n                <ride.icon className=\"w-5 h-5\" />\r\n                <span>{ride.name}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Expiry */}\r\n        <div className=\"space-y-4\">\r\n          <label className=\"text-xl font-semibold text-foreground\">\r\n            Expire party request in\r\n          </label>\r\n          <div className=\"flex flex-wrap gap-3\">\r\n            {[\"10 min\", \"15 min\", \"20 min\", \"30 min\", \"1 hr\"].map((time) => (\r\n              <label\r\n                key={time}\r\n                className=\"flex items-center space-x-2 cursor-pointer\"\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"expiration\"\r\n                  value={time}\r\n                  checked={expiresIn === time}\r\n                  onChange={() => setExpiresIn(time)}\r\n                  className=\"h-4 w-4 text-primary focus:ring-ring\"\r\n                />\r\n                <span className=\"text-foreground\">{time}</span>\r\n              </label>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Submit */}\r\n        <div className=\"pt-6 text-center\">\r\n          <button\r\n            onClick={handleStartParty}\r\n            className=\"px-12 py-4 bg-primary text-primary-foreground font-bold text-lg rounded-full hover:bg-primary/90 transition-colors shadow-lg\"\r\n          >\r\n            Start Party!\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}
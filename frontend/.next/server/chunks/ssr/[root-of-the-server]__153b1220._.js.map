{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/hostparty/page.tsx"],"sourcesContent":["// frontend/src/app/hostparty/page.tsx\r\n'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useParties } from '@/context/PartyContext'; // <-- This hook gets us the list of parties\r\nimport { User, Bus, Car, CarTaxiFront, Footprints, AlertCircle } from 'lucide-react';\r\n\r\nconst rideOptions = [\r\n  { name: 'On Foot', icon: Footprints },\r\n  { name: 'Auto', icon: CarTaxiFront },\r\n  { name: 'Cab', icon: Car },\r\n  { name: 'Bus', icon: Bus },\r\n  { name: 'SUV', icon: Car },\r\n];\r\n\r\nexport default function HostPartyPage() {\r\n  const router = useRouter();\r\n  // Get the complete list of parties AND the function to add one\r\n  const { parties, addParty } = useParties();\r\n\r\n  // --- Check if the current user is already hosting a party ---\r\n  // In our simple case, we check if any party has `host === 'You'`\r\n  const isAlreadyHosting = parties.some(party => party.host === 'You');\r\n\r\n\r\n  // --- All of your state and handlers remain the same. ---\r\n  // They are only needed if the user is NOT already hosting.\r\n  const [partySize, setPartySize] = useState(1);\r\n  const [meetupPoint, setMeetupPoint] = useState('');\r\n  const [dropOff, setDropOff] = useState('');\r\n  const [isFriendsOnly, setIsFriendsOnly] = useState(false);\r\n  const [isGenderOnly, setIsGenderOnly] = useState(false);\r\n  const [selectedRides, setSelectedRides] = useState<string[]>([]);\r\n  const [expiresIn, setExpiresIn] = useState('10 min');\r\n\r\n  const handlePartySizeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let newSize = parseInt(e.target.value, 10) || 0;\r\n    if (newSize > 7) newSize = 7;\r\n    if (newSize < 0) newSize = 0;\r\n    setPartySize(newSize);\r\n  };\r\n  const handleRemoveMember = () => { if (partySize > 0) setPartySize(partySize - 1); };\r\n  const handleRideToggle = (rideName: string) => {\r\n    if (selectedRides.includes(rideName)) {\r\n      setSelectedRides(selectedRides.filter((r) => r !== rideName));\r\n    } else {\r\n      if (selectedRides.length < 2) setSelectedRides([...selectedRides, rideName]);\r\n      else alert(\"You can only select a maximum of 2 ride options.\");\r\n    }\r\n  };\r\n  const handleStartParty = () => {\r\n    if (!meetupPoint || !dropOff || partySize === 0) {\r\n      alert('Please fill out the meetup point, drop-off, and set a party size.');\r\n      return;\r\n    }\r\n    addParty({\r\n      partySize, meetupPoint, dropOff, isFriendsOnly, isGenderOnly,\r\n      rideOptions: selectedRides, expiresIn: expiresIn\r\n    });\r\n    router.push('/dashboard');\r\n  };\r\n\r\n  \r\n  // --- This is the conditional rendering logic ---\r\n\r\n  if (isAlreadyHosting) {\r\n    // If the user IS hosting, show this message.\r\n    return (\r\n        <div className=\"p-8 max-w-2xl mx-auto text-center mt-10\">\r\n          <div className=\"bg-card p-8 rounded-lg shadow-md border\">\r\n              <AlertCircle className=\"w-16 h-16 mx-auto text-primary mb-4\"/>\r\n              <h1 className=\"text-2xl font-bold text-card-foreground mb-2\">You're Already Hosting!</h1>\r\n              <p className=\"text-muted-foreground mb-6\">\r\n                  You can only host one ride at a time. Please cancel your existing ride from the homepage if you wish to create a new one.\r\n              </p>\r\n              <Link href=\"/\" className=\"inline-block px-8 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition-colors\">\r\n                  Back to Homepage\r\n              </Link>\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n\r\n  // If the user is NOT hosting, show your original form.\r\n  // This is your entire UI, 100% preserved.\r\n  return (\r\n    <div className=\"p-8 max-w-4xl mx-auto\">\r\n      <Link href=\"/\" className=\"inline-block mb-8 px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors font-medium\">\r\n        ‚Üê Back\r\n      </Link>\r\n      \r\n      <div className=\"space-y-10\">\r\n        <h1 className=\"text-3xl font-bold text-foreground\">Host a Party</h1>\r\n\r\n        <div className=\"space-y-4\">\r\n          <label className=\"text-xl font-semibold text-foreground\">Max party size</label>\r\n          <div className=\"flex items-center space-x-4\">\r\n            <input \r\n              type=\"number\" value={partySize} onChange={handlePartySizeChange}\r\n              className=\"w-20 p-2 border-2 border-input rounded-lg text-center text-lg bg-background\" min=\"1\" max=\"7\"\r\n            />\r\n            <div className=\"flex items-center space-x-2\">\r\n              {Array.from({ length: partySize }).map((_, index) => (\r\n                <User key={index} className=\"w-8 h-8 text-muted-foreground cursor-pointer\" onClick={handleRemoveMember}/>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"meetup\" className=\"text-xl font-semibold text-foreground\">Meetup point</label>\r\n          <input \r\n            type=\"text\" id=\"meetup\" placeholder=\"Enter the full meeting address\" \r\n            className=\"w-full p-3 border-2 border-input rounded-lg bg-background\"\r\n            value={meetupPoint} onChange={(e) => setMeetupPoint(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <label htmlFor=\"dropoff\" className=\"text-xl font-semibold text-foreground\">Your (host) drop location</label>\r\n          <input \r\n            type=\"text\" id=\"dropoff\" placeholder=\"Enter your final destination address\" \r\n            className=\"w-full p-3 border-2 border-input rounded-lg bg-background\"\r\n            value={dropOff} onChange={(e) => setDropOff(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n            <h2 className=\"text-xl font-semibold text-foreground\">Privacy</h2>\r\n            <div className=\"flex flex-col space-y-3\">\r\n              <label className=\"flex items-center space-x-3 cursor-pointer\">\r\n                  <input type=\"checkbox\" className=\"h-5 w-5 rounded text-primary focus:ring-ring\"\r\n                    checked={isFriendsOnly} onChange={(e) => setIsFriendsOnly(e.target.checked)}\r\n                  />\r\n                  <span className=\"text-foreground\">Friends only (Private Party)</span>\r\n              </label>\r\n              <label className=\"flex items-center space-x-3 cursor-pointer\">\r\n                  <input type=\"checkbox\" className=\"h-5 w-5 rounded text-primary focus:ring-ring\"\r\n                    checked={isGenderOnly} onChange={(e) => setIsGenderOnly(e.target.checked)}\r\n                  />\r\n                  <span className=\"text-foreground\">Your gender only</span>\r\n              </label>\r\n            </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-4\">\r\n          <label className=\"text-xl font-semibold text-foreground\">Ideal ride from destination</label>\r\n          <div className=\"flex flex-wrap gap-3\">\r\n            {rideOptions.map(ride => (\r\n              <button \r\n                key={ride.name} onClick={() => handleRideToggle(ride.name)}\r\n                className={`flex items-center space-x-2 px-4 py-2 rounded-full border-2 transition-colors ${\r\n                  selectedRides.includes(ride.name) ? 'bg-primary text-primary-foreground border-primary' : 'bg-background text-foreground border-input hover:border-foreground/50'\r\n                }`}\r\n              >\r\n                <ride.icon className=\"w-5 h-5\"/>\r\n                <span>{ride.name}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"space-y-4\">\r\n            <label className=\"text-xl font-semibold text-foreground\">Expire party request in</label>\r\n            <div className=\"flex flex-wrap gap-3\">\r\n                {['10 min', '15 min', '20 min', '30 min', '1 hr'].map(time => (\r\n                    <label key={time} className=\"flex items-center space-x-2 cursor-pointer\">\r\n                        <input type=\"radio\" name=\"expiration\" value={time}\r\n                          checked={expiresIn === time} onChange={() => setExpiresIn(time)}\r\n                          className=\"h-4 w-4 text-primary focus:ring-ring\"\r\n                        />\r\n                        <span className=\"text-foreground\">{time}</span>\r\n                    </label>\r\n                ))}\r\n            </div>\r\n        </div>\r\n        \r\n        <div className=\"pt-6 text-center\">\r\n          <button onClick={handleStartParty} className=\"px-12 py-4 bg-primary text-primary-foreground font-bold text-lg rounded-full hover:bg-primary/90 transition-colors shadow-lg\">\r\n            Start Party!\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}
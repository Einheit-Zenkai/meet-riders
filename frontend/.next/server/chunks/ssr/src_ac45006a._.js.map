{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/components/ui/hostbutton.tsx"],"sourcesContent":["import Link from \"next/link\";\r\nimport { Plus } from \"lucide-react\";\r\n\r\nexport default function HostButton() {\r\n  return (\r\n    <div className=\"fixed bottom-10 right-10 group z-50\">\r\n      <Link\r\n        href=\"/hostparty\"\r\n        className=\"flex items-center justify-center w-16 h-16 bg-black rounded-full shadow-lg hover:bg-gray-800 transition-colors duration-300\"\r\n      >\r\n        <Plus className=\"w-8 h-8 text-white\" />\r\n      </Link>\r\n      <div className=\"absolute bottom-1/2 transform translate-y-1/2 right-20 px-3 py-1.5 bg-gray-900 text-white text-sm rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap\">\r\n        Host Ride\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,4JAAA,CAAA,UAAI;gBACH,MAAK;gBACL,WAAU;0BAEV,cAAA,8OAAC,kMAAA,CAAA,OAAI;oBAAC,WAAU;;;;;;;;;;;0BAElB,8OAAC;gBAAI,WAAU;0BAA6M;;;;;;;;;;;;AAKlO","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/SearchAndFilters.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Filter } from \"lucide-react\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface SearchAndFiltersProps {\r\n  destinationQuery: string;\r\n  onDestinationQueryChange: (query: string) => void;\r\n  timeWindowMins: string;\r\n  onTimeWindowChange: (timeWindow: string) => void;\r\n  sameDepartment: boolean;\r\n  onSameDepartmentChange: (value: boolean) => void;\r\n  sameYear: boolean;\r\n  onSameYearChange: (value: boolean) => void;\r\n  showFriendsOnly: boolean;\r\n  onShowFriendsOnlyChange: (value: boolean) => void;\r\n  showMyUniversityOnly: boolean;\r\n  onShowMyUniversityOnlyChange: (value: boolean) => void;\r\n}\r\n\r\nexport default function SearchAndFilters({\r\n  destinationQuery,\r\n  onDestinationQueryChange,\r\n  timeWindowMins,\r\n  onTimeWindowChange,\r\n  sameDepartment,\r\n  onSameDepartmentChange,\r\n  sameYear,\r\n  onSameYearChange,\r\n  showFriendsOnly,\r\n  onShowFriendsOnlyChange,\r\n  showMyUniversityOnly,\r\n  onShowMyUniversityOnlyChange,\r\n}: SearchAndFiltersProps) {\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const filtersRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Close filters when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (filtersRef.current && !filtersRef.current.contains(event.target as Node)) {\r\n        setShowFilters(false);\r\n      }\r\n    };\r\n\r\n    if (showFilters) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [showFilters]);\r\n\r\n  return (\r\n    <div className=\"flex-1 relative\" ref={filtersRef}>\r\n      <input\r\n        type=\"text\"\r\n        className=\"w-full p-3 pr-11 border border-input rounded-full bg-background text-foreground placeholder:text-muted-foreground shadow-sm focus:outline-none focus:ring-2 focus:ring-ring\"\r\n        placeholder=\"Search destination (e.g., MG Road, North Gate)\"\r\n        value={destinationQuery}\r\n        onChange={(e) => onDestinationQueryChange(e.target.value)}\r\n      />\r\n      \r\n      <button\r\n        className=\"absolute right-1 top-1/2 -translate-y-1/2 p-2 rounded-md hover:bg-accent\"\r\n        title=\"Filters\"\r\n        onClick={() => setShowFilters(!showFilters)}\r\n      >\r\n        <Filter className=\"w-4 h-4\" />\r\n      </button>\r\n\r\n      {showFilters && (\r\n        <div className=\"absolute z-50 mt-2 w-80 rounded-md border bg-card shadow p-3\">\r\n          <div className=\"space-y-2\">\r\n            <label htmlFor=\"timeWindow\" className=\"text-sm font-medium text-muted-foreground\">\r\n              Expiring within\r\n            </label>\r\n            <select\r\n              id=\"timeWindow\"\r\n              className=\"w-full p-2 border rounded-md bg-background\"\r\n              value={timeWindowMins}\r\n              onChange={(e) => onTimeWindowChange(e.target.value)}\r\n            >\r\n              <option value=\"any\">Any time</option>\r\n              <option value=\"10\">10 minutes</option>\r\n              <option value=\"15\">15 minutes</option>\r\n              <option value=\"30\">30 minutes</option>\r\n              <option value=\"60\">1 hour</option>\r\n            </select>\r\n            \r\n            <div className=\"flex items-center gap-2 pt-1\">\r\n              <input \r\n                type=\"checkbox\" \r\n                disabled \r\n                checked={sameDepartment}\r\n                onChange={(e) => onSameDepartmentChange(e.target.checked)}\r\n              />\r\n              <span className=\"text-sm text-muted-foreground\">Same department (coming soon)</span>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center gap-2\">\r\n              <input \r\n                type=\"checkbox\" \r\n                disabled \r\n                checked={sameYear}\r\n                onChange={(e) => onSameYearChange(e.target.checked)}\r\n              />\r\n              <span className=\"text-sm text-muted-foreground\">Same year (coming soon)</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 pt-1\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={showFriendsOnly}\r\n                onChange={e => onShowFriendsOnlyChange(e.target.checked)}\r\n              />\r\n              <span className=\"text-sm text-foreground\">Friends' Parties only</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={showMyUniversityOnly}\r\n                onChange={e => onShowMyUniversityOnlyChange(e.target.checked)}\r\n              />\r\n              <span className=\"text-sm text-foreground\">My University only</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAoBe,SAAS,iBAAiB,EACvC,gBAAgB,EAChB,wBAAwB,EACxB,cAAc,EACd,kBAAkB,EAClB,cAAc,EACd,sBAAsB,EACtB,QAAQ,EACR,gBAAgB,EAChB,eAAe,EACf,uBAAuB,EACvB,oBAAoB,EACpB,4BAA4B,EACN;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,aAAa,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAE1C,sCAAsC;IACtC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,WAAW,OAAO,IAAI,CAAC,WAAW,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC5E,eAAe;YACjB;QACF;QAEA,IAAI,aAAa;YACf,SAAS,gBAAgB,CAAC,aAAa;QACzC;QAEA,OAAO;YACL,SAAS,mBAAmB,CAAC,aAAa;QAC5C;IACF,GAAG;QAAC;KAAY;IAEhB,qBACE,8OAAC;QAAI,WAAU;QAAkB,KAAK;;0BACpC,8OAAC;gBACC,MAAK;gBACL,WAAU;gBACV,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,yBAAyB,EAAE,MAAM,CAAC,KAAK;;;;;;0BAG1D,8OAAC;gBACC,WAAU;gBACV,OAAM;gBACN,SAAS,IAAM,eAAe,CAAC;0BAE/B,cAAA,8OAAC,sMAAA,CAAA,SAAM;oBAAC,WAAU;;;;;;;;;;;YAGnB,6BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAM,SAAQ;4BAAa,WAAU;sCAA4C;;;;;;sCAGlF,8OAAC;4BACC,IAAG;4BACH,WAAU;4BACV,OAAO;4BACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;;8CAElD,8OAAC;oCAAO,OAAM;8CAAM;;;;;;8CACpB,8OAAC;oCAAO,OAAM;8CAAK;;;;;;8CACnB,8OAAC;oCAAO,OAAM;8CAAK;;;;;;8CACnB,8OAAC;oCAAO,OAAM;8CAAK;;;;;;8CACnB,8OAAC;oCAAO,OAAM;8CAAK;;;;;;;;;;;;sCAGrB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,QAAQ;oCACR,SAAS;oCACT,UAAU,CAAC,IAAM,uBAAuB,EAAE,MAAM,CAAC,OAAO;;;;;;8CAE1D,8OAAC;oCAAK,WAAU;8CAAgC;;;;;;;;;;;;sCAGlD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,QAAQ;oCACR,SAAS;oCACT,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,OAAO;;;;;;8CAEpD,8OAAC;oCAAK,WAAU;8CAAgC;;;;;;;;;;;;sCAElD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,UAAU,CAAA,IAAK,wBAAwB,EAAE,MAAM,CAAC,OAAO;;;;;;8CAEzD,8OAAC;oCAAK,WAAU;8CAA0B;;;;;;;;;;;;sCAE5C,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,UAAU,CAAA,IAAK,6BAA6B,EAAE,MAAM,CAAC,OAAO;;;;;;8CAE9D,8OAAC;oCAAK,WAAU;8CAA0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOxD","debugId":null}},
    {"offset": {"line": 306, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/NotificationsDropdown.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Bell } from \"lucide-react\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface NotificationsDropdownProps {\r\n  notifications?: Array<{\r\n    id: string;\r\n    message: string;\r\n    timestamp: Date;\r\n    read: boolean;\r\n  }>;\r\n}\r\n\r\nexport default function NotificationsDropdown({ notifications = [] }: NotificationsDropdownProps) {\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setShowDropdown(false);\r\n      }\r\n    };\r\n\r\n    if (showDropdown) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [showDropdown]);\r\n\r\n  const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      <button\r\n        className=\"p-2 rounded-full border hover:bg-accent relative\"\r\n        title=\"Notifications\"\r\n        onClick={() => setShowDropdown(!showDropdown)}\r\n      >\r\n        <Bell className=\"w-5 h-5\" />\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\r\n            {unreadCount > 9 ? '9+' : unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n      \r\n      {showDropdown && (\r\n        <div className=\"absolute right-0 mt-2 w-80 rounded-md border bg-card shadow-lg z-50 max-h-96 overflow-y-auto\">\r\n          <div className=\"p-3 border-b\">\r\n            <h3 className=\"font-semibold text-sm\">Notifications</h3>\r\n          </div>\r\n          \r\n          {notifications.length === 0 ? (\r\n            <div className=\"p-4 text-center text-sm text-muted-foreground\">\r\n              No notifications\r\n            </div>\r\n          ) : (\r\n            <div className=\"divide-y\">\r\n              {notifications.map((notification) => (\r\n                <div\r\n                  key={notification.id}\r\n                  className={`p-3 hover:bg-accent/50 ${!notification.read ? 'bg-accent/20' : ''}`}\r\n                >\r\n                  <p className=\"text-sm\">{notification.message}</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-1\">\r\n                    {notification.timestamp.toLocaleTimeString()}\r\n                  </p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAce,SAAS,sBAAsB,EAAE,gBAAgB,EAAE,EAA8B;IAC9F,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAE3C,uCAAuC;IACvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBAC9E,gBAAgB;YAClB;QACF;QAEA,IAAI,cAAc;YAChB,SAAS,gBAAgB,CAAC,aAAa;QACzC;QAEA,OAAO;YACL,SAAS,mBAAmB,CAAC,aAAa;QAC5C;IACF,GAAG;QAAC;KAAa;IAEjB,MAAM,cAAc,cAAc,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,IAAI,EAAE,MAAM;IAE7D,qBACE,8OAAC;QAAI,WAAU;QAAW,KAAK;;0BAC7B,8OAAC;gBACC,WAAU;gBACV,OAAM;gBACN,SAAS,IAAM,gBAAgB,CAAC;;kCAEhC,8OAAC,kMAAA,CAAA,OAAI;wBAAC,WAAU;;;;;;oBACf,cAAc,mBACb,8OAAC;wBAAK,WAAU;kCACb,cAAc,IAAI,OAAO;;;;;;;;;;;;YAK/B,8BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAG,WAAU;sCAAwB;;;;;;;;;;;oBAGvC,cAAc,MAAM,KAAK,kBACxB,8OAAC;wBAAI,WAAU;kCAAgD;;;;;6CAI/D,8OAAC;wBAAI,WAAU;kCACZ,cAAc,GAAG,CAAC,CAAC,6BAClB,8OAAC;gCAEC,WAAW,CAAC,uBAAuB,EAAE,CAAC,aAAa,IAAI,GAAG,iBAAiB,IAAI;;kDAE/E,8OAAC;wCAAE,WAAU;kDAAW,aAAa,OAAO;;;;;;kDAC5C,8OAAC;wCAAE,WAAU;kDACV,aAAa,SAAS,CAAC,kBAAkB;;;;;;;+BALvC,aAAa,EAAE;;;;;;;;;;;;;;;;;;;;;;AAetC","debugId":null}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/ThemeToggle.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Moon, Sun } from \"lucide-react\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function ThemeToggle() {\r\n  const [isDark, setIsDark] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check initial theme\r\n    const isDarkMode = document.documentElement.classList.contains('dark');\r\n    setIsDark(isDarkMode);\r\n  }, []);\r\n\r\n  const toggleTheme = () => {\r\n    const newIsDark = !isDark;\r\n    setIsDark(newIsDark);\r\n    \r\n    if (newIsDark) {\r\n      document.documentElement.classList.add('dark');\r\n      localStorage.setItem('theme', 'dark');\r\n    } else {\r\n      document.documentElement.classList.remove('dark');\r\n      localStorage.setItem('theme', 'light');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      className=\"p-2 rounded-full border hover:bg-accent transition-colors\"\r\n      title={`Switch to ${isDark ? 'light' : 'dark'} mode`}\r\n      onClick={toggleTheme}\r\n    >\r\n      {isDark ? (\r\n        <Sun className=\"w-5 h-5\" />\r\n      ) : (\r\n        <Moon className=\"w-5 h-5\" />\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,sBAAsB;QACtB,MAAM,aAAa,SAAS,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC;QAC/D,UAAU;IACZ,GAAG,EAAE;IAEL,MAAM,cAAc;QAClB,MAAM,YAAY,CAAC;QACnB,UAAU;QAEV,IAAI,WAAW;YACb,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;YACvC,aAAa,OAAO,CAAC,SAAS;QAChC,OAAO;YACL,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;YAC1C,aAAa,OAAO,CAAC,SAAS;QAChC;IACF;IAEA,qBACE,8OAAC;QACC,WAAU;QACV,OAAO,CAAC,UAAU,EAAE,SAAS,UAAU,OAAO,KAAK,CAAC;QACpD,SAAS;kBAER,uBACC,8OAAC,gMAAA,CAAA,MAAG;YAAC,WAAU;;;;;iCAEf,8OAAC,kMAAA,CAAA,OAAI;YAAC,WAAU;;;;;;;;;;;AAIxB","debugId":null}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/LogoutButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { LogOut } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\n\r\nexport default function LogoutButton() {\r\n  const [showDialog, setShowDialog] = useState(false);\r\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\r\n\r\n  const handleLogout = async () => {\r\n    setIsLoggingOut(true);\r\n    try {\r\n      const supabase = createClient();\r\n      await supabase.auth.signOut();\r\n      window.location.href = '/login';\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n      setIsLoggingOut(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        className=\"p-2 rounded-md border hover:bg-accent flex items-center gap-2 transition-colors\"\r\n        title=\"Log out\"\r\n        onClick={() => setShowDialog(true)}\r\n      >\r\n        <LogOut className=\"w-5 h-5\" />\r\n        <span className=\"hidden sm:inline\">Log out</span>\r\n      </button>\r\n\r\n      {/* Confirm dialog */}\r\n      {showDialog && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\">\r\n          <div className=\"bg-card border rounded-lg shadow-lg w-full max-w-sm p-5\">\r\n            <h2 className=\"text-lg font-semibold mb-2\">Sign out</h2>\r\n            <p className=\"text-sm text-muted-foreground mb-4\">\r\n              Are you sure you want to log out?\r\n            </p>\r\n            <div className=\"flex justify-end gap-2\">\r\n              <button\r\n                className=\"px-4 py-2 rounded-md border hover:bg-accent transition-colors\"\r\n                onClick={() => setShowDialog(false)}\r\n                disabled={isLoggingOut}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                className=\"px-4 py-2 rounded-md bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors disabled:opacity-50\"\r\n                onClick={handleLogout}\r\n                disabled={isLoggingOut}\r\n              >\r\n                {isLoggingOut ? 'Logging out...' : 'Yes, log out'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,MAAM,eAAe;QACnB,gBAAgB;QAChB,IAAI;YACF,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,eAAY,AAAD;YAC5B,MAAM,SAAS,IAAI,CAAC,OAAO;YAC3B,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,gBAAgB;QAClB;IACF;IAEA,qBACE;;0BACE,8OAAC;gBACC,WAAU;gBACV,OAAM;gBACN,SAAS,IAAM,cAAc;;kCAE7B,8OAAC,0MAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;kCAClB,8OAAC;wBAAK,WAAU;kCAAmB;;;;;;;;;;;;YAIpC,4BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAA6B;;;;;;sCAC3C,8OAAC;4BAAE,WAAU;sCAAqC;;;;;;sCAGlD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,WAAU;oCACV,SAAS,IAAM,cAAc;oCAC7B,UAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,WAAU;oCACV,SAAS;oCACT,UAAU;8CAET,eAAe,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;;AAQnD","debugId":null}},
    {"offset": {"line": 618, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/DashboardHeader.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport SearchAndFilters from \"./SearchAndFilters\";\r\nimport NotificationsDropdown from \"./NotificationsDropdown\";\r\nimport ThemeToggle from \"./ThemeToggle\";\r\nimport LogoutButton from \"./LogoutButton\";\r\n\r\ninterface DashboardHeaderProps {\r\n  welcomeName: string | null;\r\n  destinationQuery: string;\r\n  onDestinationQueryChange: (query: string) => void;\r\n  timeWindowMins: string;\r\n  onTimeWindowChange: (timeWindow: string) => void;\r\n  sameDepartment: boolean;\r\n  onSameDepartmentChange: (value: boolean) => void;\r\n  sameYear: boolean;\r\n  onSameYearChange: (value: boolean) => void;\r\n  showFriendsOnly: boolean;\r\n  onShowFriendsOnlyChange: (value: boolean) => void;\r\n  showMyUniversityOnly: boolean;\r\n  onShowMyUniversityOnlyChange: (value: boolean) => void;\r\n}\r\n\r\nexport default function DashboardHeader({\r\n  welcomeName,\r\n  destinationQuery,\r\n  onDestinationQueryChange,\r\n  timeWindowMins,\r\n  onTimeWindowChange,\r\n  sameDepartment,\r\n  onSameDepartmentChange,\r\n  sameYear,\r\n  onSameYearChange,\r\n  showFriendsOnly,\r\n  onShowFriendsOnlyChange,\r\n  showMyUniversityOnly,\r\n  onShowMyUniversityOnlyChange,\r\n}: DashboardHeaderProps) {\r\n  return (\r\n    <div className=\"flex flex-col gap-3 mb-4\">\r\n      <div className=\"flex items-center gap-3\">\r\n        <SearchAndFilters\r\n          destinationQuery={destinationQuery}\r\n          onDestinationQueryChange={onDestinationQueryChange}\r\n          timeWindowMins={timeWindowMins}\r\n          onTimeWindowChange={onTimeWindowChange}\r\n          sameDepartment={sameDepartment}\r\n          onSameDepartmentChange={onSameDepartmentChange}\r\n          sameYear={sameYear}\r\n          onSameYearChange={onSameYearChange}\r\n          showFriendsOnly={showFriendsOnly}\r\n          onShowFriendsOnlyChange={onShowFriendsOnlyChange}\r\n          showMyUniversityOnly={showMyUniversityOnly}\r\n          onShowMyUniversityOnlyChange={onShowMyUniversityOnlyChange}\r\n        />\r\n        \r\n        <NotificationsDropdown />\r\n        <ThemeToggle />\r\n        <LogoutButton />\r\n      </div>\r\n\r\n      {/* Welcome message */}\r\n      <h1 className=\"text-2xl md:text-3xl font-bold text-foreground\">\r\n        {welcomeName ? `Welcome back, ${welcomeName}` : 'Meet Riders'}\r\n      </h1>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAuBe,SAAS,gBAAgB,EACtC,WAAW,EACX,gBAAgB,EAChB,wBAAwB,EACxB,cAAc,EACd,kBAAkB,EAClB,cAAc,EACd,sBAAsB,EACtB,QAAQ,EACR,gBAAgB,EAChB,eAAe,EACf,uBAAuB,EACvB,oBAAoB,EACpB,4BAA4B,EACP;IACrB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,sKAAA,CAAA,UAAgB;wBACf,kBAAkB;wBAClB,0BAA0B;wBAC1B,gBAAgB;wBAChB,oBAAoB;wBACpB,gBAAgB;wBAChB,wBAAwB;wBACxB,UAAU;wBACV,kBAAkB;wBAClB,iBAAiB;wBACjB,yBAAyB;wBACzB,sBAAsB;wBACtB,8BAA8B;;;;;;kCAGhC,8OAAC,2KAAA,CAAA,UAAqB;;;;;kCACtB,8OAAC,iKAAA,CAAA,UAAW;;;;;kCACZ,8OAAC,kKAAA,CAAA,UAAY;;;;;;;;;;;0BAIf,8OAAC;gBAAG,WAAU;0BACX,cAAc,CAAC,cAAc,EAAE,aAAa,GAAG;;;;;;;;;;;;AAIxD","debugId":null}},
    {"offset": {"line": 697, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 711, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\r\n        outline:\r\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 766, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-2 shadow-sm\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn(\"leading-none font-semibold\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn(\"px-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 861, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Avatar({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\r\n  return (\r\n    <AvatarPrimitive.Root\r\n      data-slot=\"avatar\"\r\n      className={cn(\r\n        \"relative flex size-8 shrink-0 overflow-hidden rounded-full\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AvatarImage({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\r\n  return (\r\n    <AvatarPrimitive.Image\r\n      data-slot=\"avatar-image\"\r\n      className={cn(\"aspect-square size-full\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AvatarFallback({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\r\n  return (\r\n    <AvatarPrimitive.Fallback\r\n      data-slot=\"avatar-fallback\"\r\n      className={cn(\r\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n"],"names":[],"mappings":";;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,8OAAC,kKAAA,CAAA,OAAoB;QACnB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,kKAAA,CAAA,QAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OACmD;IACtD,qBACE,8OAAC,kKAAA,CAAA,WAAwB;QACvB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oEACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 911, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/services/partyMemberService.ts"],"sourcesContent":["// Service functions for party member operations\r\nimport { createClient } from \"@/utils/supabase/client\";\r\nimport type { PartyMember } from \"../types\";\r\n\r\nexport class PartyMemberService {\r\n  private supabase = createClient();\r\n\r\n  /**\r\n   * Join a party as the current user\r\n   */\r\n  async joinParty(partyId: number, pickupNotes?: string): Promise<{ success: boolean; error?: string; member?: PartyMember }> {\r\n    try {\r\n      const { data: { user } } = await this.supabase.auth.getUser();\r\n      if (!user) {\r\n        return { success: false, error: \"User not authenticated\" };\r\n      }\r\n\r\n      // Check if user can join the party using our helper function\r\n      const { data: canJoin, error: checkError } = await this.supabase\r\n        .rpc('can_user_join_party', { \r\n          party_bigint: partyId, \r\n          user_uuid: user.id \r\n        });\r\n\r\n      if (checkError) {\r\n        console.error('Error checking join eligibility:', checkError);\r\n        return { success: false, error: \"Failed to verify join eligibility\" };\r\n      }\r\n\r\n      if (!canJoin) {\r\n        return { success: false, error: \"Cannot join this party (full, expired, or already a member)\" };\r\n      }\r\n\r\n      // Join the party\r\n      const { data: member, error: joinError } = await this.supabase\r\n        .from('party_members')\r\n        .insert({\r\n          party_id: partyId,\r\n          user_id: user.id,\r\n          status: 'joined',\r\n          pickup_notes: pickupNotes || null,\r\n          contact_shared: false\r\n        })\r\n        .select(`\r\n          *,\r\n          profile:user_id (\r\n            id,\r\n            full_name,\r\n            nickname,\r\n            avatar_url,\r\n            gender,\r\n            points,\r\n            university,\r\n            show_university,\r\n            created_at,\r\n            updated_at,\r\n            birth_date\r\n          )\r\n        `)\r\n        .single();\r\n\r\n      if (joinError) {\r\n        console.error('Error joining party:', joinError?.message || joinError);\r\n        return { success: false, error: \"Failed to join party\" };\r\n      }\r\n\r\n      // Transform the data to match our PartyMember type\r\n      const transformedMember: PartyMember = {\r\n        ...member,\r\n        joined_at: new Date(member.joined_at),\r\n        left_at: member.left_at ? new Date(member.left_at) : undefined,\r\n        created_at: new Date(member.created_at),\r\n        updated_at: new Date(member.updated_at),\r\n        profile: member.profile ? {\r\n          ...member.profile,\r\n          created_at: member.profile.created_at ? new Date(member.profile.created_at) : null,\r\n          updated_at: member.profile.updated_at ? new Date(member.profile.updated_at) : null,\r\n          birth_date: member.profile.birth_date ? new Date(member.profile.birth_date) : null,\r\n        } : undefined\r\n      };\r\n\r\n      return { success: true, member: transformedMember };\r\n    } catch (error) {\r\n      console.error('Unexpected error joining party:', error);\r\n      return { success: false, error: \"An unexpected error occurred\" };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Leave a party as the current user\r\n   */\r\n  async leaveParty(partyId: number): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const { data: { user } } = await this.supabase.auth.getUser();\r\n      if (!user) {\r\n        return { success: false, error: \"User not authenticated\" };\r\n      }\r\n\r\n      // Update the member status to 'left'\r\n      const { error } = await this.supabase\r\n        .from('party_members')\r\n        .update({ \r\n          status: 'left', \r\n          left_at: new Date().toISOString() \r\n        })\r\n        .eq('party_id', partyId)\r\n        .eq('user_id', user.id)\r\n        .eq('status', 'joined');\r\n\r\n      if (error) {\r\n        console.error('Error leaving party:', error);\r\n        return { success: false, error: \"Failed to leave party\" };\r\n      }\r\n\r\n      return { success: true };\r\n    } catch (error) {\r\n      console.error('Unexpected error leaving party:', error);\r\n      return { success: false, error: \"An unexpected error occurred\" };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get party members for a specific party\r\n   */\r\n  async getPartyMembers(partyId: number): Promise<{ success: boolean; members?: PartyMember[]; error?: string }> {\r\n    try {\r\n      // 1) Fetch raw members without cross-table joins to avoid RLS/relationship issues\r\n      const { data: memberRows, error: memberErr } = await this.supabase\r\n        .from('party_members')\r\n        .select('*')\r\n        .eq('party_id', partyId)\r\n        .eq('status', 'joined')\r\n        .order('joined_at', { ascending: true });\r\n\r\n      if (memberErr) {\r\n        const errMsg = (memberErr as any)?.message || (memberErr as any)?.hint || JSON.stringify(memberErr);\r\n        console.error('Error fetching party members (base rows):', errMsg);\r\n        return { success: false, error: 'Failed to fetch party members' };\r\n      }\r\n\r\n      const members = memberRows || [];\r\n      const userIds = members.map((m: any) => m.user_id).filter(Boolean);\r\n\r\n      // 2) If there are members, fetch their profiles in a second query\r\n      let profilesById: Record<string, any> = {};\r\n      if (userIds.length > 0) {\r\n        const { data: profiles, error: profileErr } = await this.supabase\r\n          .from('profiles')\r\n          .select('id, full_name, nickname, avatar_url, gender, points, university, show_university, created_at, updated_at, birth_date')\r\n          .in('id', userIds);\r\n\r\n        if (profileErr) {\r\n          const errMsg = (profileErr as any)?.message || (profileErr as any)?.hint || JSON.stringify(profileErr);\r\n          // If profiles are blocked by RLS, we still return members without profile to avoid hard failure\r\n          console.warn('Profiles fetch blocked or failed; continuing without profile details:', errMsg);\r\n        } else {\r\n          profilesById = (profiles || []).reduce((acc: Record<string, any>, p: any) => {\r\n            acc[p.id] = p;\r\n            return acc;\r\n          }, {});\r\n        }\r\n      }\r\n\r\n      // 3) Transform and attach profiles when available\r\n      const transformedMembers: PartyMember[] = members.map((member: any) => {\r\n        const profile = profilesById[member.user_id];\r\n        return {\r\n          ...member,\r\n          joined_at: new Date(member.joined_at),\r\n          left_at: member.left_at ? new Date(member.left_at) : undefined,\r\n          created_at: new Date(member.created_at),\r\n          updated_at: new Date(member.updated_at),\r\n          profile: profile\r\n            ? {\r\n                ...profile,\r\n                created_at: profile.created_at ? new Date(profile.created_at) : null,\r\n                updated_at: profile.updated_at ? new Date(profile.updated_at) : null,\r\n                birth_date: profile.birth_date ? new Date(profile.birth_date) : null,\r\n              }\r\n            : undefined,\r\n        };\r\n      });\r\n\r\n      return { success: true, members: transformedMembers };\r\n    } catch (error) {\r\n      console.error('Unexpected error fetching party members:', error);\r\n      return { success: false, error: \"An unexpected error occurred\" };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get member count for a party\r\n   */\r\n  async getPartyMemberCount(partyId: number): Promise<{ success: boolean; count?: number; error?: string }> {\r\n    try {\r\n      const { data: count, error } = await this.supabase\r\n        .rpc('get_party_member_count', { party_bigint: partyId });\r\n\r\n      if (error) {\r\n        console.error('Error getting member count:', error);\r\n        return { success: false, error: \"Failed to get member count\" };\r\n      }\r\n\r\n      return { success: true, count: count || 0 };\r\n    } catch (error) {\r\n      console.error('Unexpected error getting member count:', error);\r\n      return { success: false, error: \"An unexpected error occurred\" };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if current user is a member of a party\r\n   */\r\n  async isUserMember(partyId: number): Promise<{ success: boolean; isMember?: boolean; error?: string }> {\r\n    try {\r\n      const { data: { user } } = await this.supabase.auth.getUser();\r\n      if (!user) {\r\n        return { success: true, isMember: false };\r\n      }\r\n\r\n      const { data: membership, error } = await this.supabase\r\n        .from('party_members')\r\n        .select('id')\r\n        .eq('party_id', partyId)\r\n        .eq('user_id', user.id)\r\n        .eq('status', 'joined')\r\n        .single();\r\n\r\n      if (error && error.code !== 'PGRST116') { // PGRST116 is \"not found\" error\r\n        console.error('Error checking membership:', error);\r\n        return { success: false, error: \"Failed to check membership\" };\r\n      }\r\n\r\n      return { success: true, isMember: !!membership };\r\n    } catch (error) {\r\n      console.error('Unexpected error checking membership:', error);\r\n      return { success: false, error: \"An unexpected error occurred\" };\r\n    }\r\n  }\r\n\r\n  /** Host-only: kick a member from a party via RPC */\r\n  async kickMember(partyId: number, memberUserId: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const { data: { user } } = await this.supabase.auth.getUser();\r\n      if (!user) return { success: false, error: 'Not authenticated' };\r\n      const { error } = await this.supabase.rpc('kick_party_member', {\r\n        p_party_id: partyId,\r\n        p_member_user_id: memberUserId,\r\n      });\r\n      if (error) return { success: false, error: error.message };\r\n      return { success: true };\r\n    } catch (e: any) {\r\n      return { success: false, error: e?.message || 'Failed to kick member' };\r\n    }\r\n  }\r\n}\r\n\r\n// Export a singleton instance\r\nexport const partyMemberService = new PartyMemberService();\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1189, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { XIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Dialog({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\r\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\r\n}\r\n\r\nfunction DialogTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\r\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\r\n}\r\n\r\nfunction DialogPortal({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\r\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\r\n}\r\n\r\nfunction DialogClose({\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\r\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\r\n}\r\n\r\nfunction DialogOverlay({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\r\n  return (\r\n    <DialogPrimitive.Overlay\r\n      data-slot=\"dialog-overlay\"\r\n      className={cn(\r\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogContent({\r\n  className,\r\n  children,\r\n  showCloseButton = true,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\r\n  showCloseButton?: boolean\r\n}) {\r\n  return (\r\n    <DialogPortal data-slot=\"dialog-portal\">\r\n      <DialogOverlay />\r\n      <DialogPrimitive.Content\r\n        data-slot=\"dialog-content\"\r\n        className={cn(\r\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        {showCloseButton && (\r\n          <DialogPrimitive.Close\r\n            data-slot=\"dialog-close\"\r\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\r\n          >\r\n            <XIcon />\r\n            <span className=\"sr-only\">Close</span>\r\n          </DialogPrimitive.Close>\r\n        )}\r\n      </DialogPrimitive.Content>\r\n    </DialogPortal>\r\n  )\r\n}\r\n\r\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-header\"\r\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"dialog-footer\"\r\n      className={cn(\r\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogTitle({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\r\n  return (\r\n    <DialogPrimitive.Title\r\n      data-slot=\"dialog-title\"\r\n      className={cn(\"text-lg leading-none font-semibold\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction DialogDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\r\n  return (\r\n    <DialogPrimitive.Description\r\n      data-slot=\"dialog-description\"\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Dialog,\r\n  DialogClose,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogOverlay,\r\n  DialogPortal,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,kKAAA,CAAA,OAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,kKAAA,CAAA,UAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,kKAAA,CAAA,SAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,kKAAA,CAAA,QAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,kKAAA,CAAA,UAAuB;QACtB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAuB;gBACtB,aAAU;gBACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8OAAC,kKAAA,CAAA,QAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,gMAAA,CAAA,QAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,kKAAA,CAAA,QAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,kKAAA,CAAA,cAA2B;QAC1B,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 1361, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/PartyMembersDialog.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Users, Crown } from 'lucide-react';\r\nimport { Party, PartyMember } from \"../types\";\r\nimport { toast } from \"sonner\";\r\nimport { partyMemberService } from \"../services/partyMemberService\";\r\nimport { useAuth } from \"@/context/Authcontext\";\r\n\r\ninterface PartyMembersDialogProps {\r\n  party: Party;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport default function PartyMembersDialog({ party, children }: PartyMembersDialogProps) {\r\n  const [members, setMembers] = useState<PartyMember[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const { user } = useAuth();\r\n  const isHost = user?.id === party.host_id;\r\n\r\n  const fetchMembers = async () => {\r\n    if (!isOpen) return;\r\n    \r\n    setIsLoading(true);\r\n    try {\r\n      // Only host or joined members should fetch the list to respect RLS\r\n      if (!isHost && !party.user_is_member) {\r\n        setMembers([]);\r\n        return;\r\n      }\r\n      const result = await partyMemberService.getPartyMembers(party.id);\r\n      if (result.success && result.members) {\r\n        setMembers(result.members);\r\n      } else if (!result.success) {\r\n        toast.error(result.error || 'Failed to fetch party members');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching party members:', error);\r\n      toast.error('Failed to fetch party members');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      fetchMembers();\r\n    }\r\n  }, [isOpen, party.id]);\r\n\r\n  const getDisplayName = (member: PartyMember) => {\r\n    const profile = member.profile;\r\n    if (!profile) return 'Anonymous Member';\r\n    return profile.nickname || profile.full_name || 'Anonymous Member';\r\n  };\r\n\r\n  const getInitials = (member: PartyMember) => {\r\n    const profile = member.profile;\r\n    if (!profile) return 'M';\r\n    \r\n    const name = profile.nickname || profile.full_name;\r\n    if (!name) return 'M';\r\n    \r\n    return name\r\n      .split(' ')\r\n      .map(word => word.charAt(0).toUpperCase())\r\n      .slice(0, 2)\r\n      .join('');\r\n  };\r\n\r\n  const formatJoinTime = (joinedAt: Date) => {\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - joinedAt.getTime();\r\n    const diffMins = Math.floor(diffMs / (1000 * 60));\r\n    \r\n    if (diffMins < 1) return 'Just joined';\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    \r\n    const diffHours = Math.floor(diffMins / 60);\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    \r\n    const diffDays = Math.floor(diffHours / 24);\r\n    return `${diffDays}d ago`;\r\n  };\r\n        \r\n\r\n  return (\r\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\r\n      <DialogTrigger asChild>\r\n        {children}\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Users className=\"w-5 h-5\" />\r\n            Party Members ({(party.current_member_count || 0) + 1}/{party.party_size})\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n        \r\n        <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n          {/* Host */}\r\n          <div className=\"flex items-center gap-3 p-3 bg-primary/5 rounded-lg\">\r\n            <Avatar className=\"w-10 h-10\">\r\n              {party.host_profile?.avatar_url ? (\r\n                <img \r\n                  src={party.host_profile.avatar_url} \r\n                  alt=\"Host avatar\" \r\n                  className=\"w-full h-full object-cover rounded-full\"\r\n                />\r\n              ) : (\r\n                <AvatarFallback className=\"bg-primary/20 text-primary font-semibold\">\r\n                  {party.host_profile?.nickname?.charAt(0).toUpperCase() || \r\n                   party.host_profile?.full_name?.charAt(0).toUpperCase() || 'H'}\r\n                </AvatarFallback>\r\n              )}\r\n            </Avatar>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <p className=\"font-semibold text-sm truncate\">\r\n                  {party.host_profile?.nickname || \r\n                   party.host_profile?.full_name || \r\n                   'Anonymous Host'}\r\n                </p>\r\n                <Crown className=\"w-4 h-4 text-primary\" />\r\n              </div>\r\n              <p className=\"text-xs text-muted-foreground\">Host</p>\r\n            </div>\r\n            {party.host_profile?.points !== null && party.host_profile?.points !== undefined && (\r\n              <div className=\"text-xs text-primary font-medium\">\r\n                {party.host_profile.points} pts\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Members */}\r\n          {isLoading ? (\r\n            <div className=\"space-y-2\">\r\n              {[...Array(2)].map((_, i) => (\r\n                <div key={i} className=\"flex items-center gap-3 p-3 animate-pulse\">\r\n                  <div className=\"w-10 h-10 bg-muted rounded-full\"></div>\r\n                  <div className=\"flex-1 space-y-1\">\r\n                    <div className=\"h-4 bg-muted rounded w-24\"></div>\r\n                    <div className=\"h-3 bg-muted rounded w-16\"></div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (!isHost && !party.user_is_member) ? (\r\n            <div className=\"text-center py-6 text-muted-foreground\">\r\n              <Users className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n              <p className=\"text-sm\">Join this party to see the member list</p>\r\n            </div>\r\n          ) : members.length === 0 ? (\r\n            <div className=\"text-center py-6 text-muted-foreground\">\r\n              <Users className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n              <p className=\"text-sm\">No other members yet</p>\r\n            </div>\r\n          ) : (\r\n            members.map((member) => (\r\n              <div key={member.id} className=\"flex items-center gap-3 p-3 hover:bg-muted/50 rounded-lg transition-colors\">\r\n                <Avatar className=\"w-10 h-10\">\r\n                  {member.profile?.avatar_url ? (\r\n                    <img \r\n                      src={member.profile.avatar_url} \r\n                      alt=\"Member avatar\" \r\n                      className=\"w-full h-full object-cover rounded-full\"\r\n                    />\r\n                  ) : (\r\n                    <AvatarFallback className=\"bg-secondary/20 text-secondary-foreground font-semibold\">\r\n                      {getInitials(member)}\r\n                    </AvatarFallback>\r\n                  )}\r\n                </Avatar>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"font-medium text-sm truncate\">\r\n                    {getDisplayName(member)}\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Joined {formatJoinTime(member.joined_at)}\r\n                  </p>\r\n                </div>\r\n                {member.profile?.points !== null && member.profile?.points !== undefined && (\r\n                  <div className=\"text-xs text-primary font-medium\">\r\n                    {member.profile.points} pts\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1757, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/PartyJoinedOverlay.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { X, Crown, Users, MapPin, UserX } from \"lucide-react\";\r\nimport { Party, PartyMember } from \"../types\";\r\nimport { partyMemberService } from \"../services/partyMemberService\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface PartyJoinedOverlayProps {\r\n  party: Party;\r\n  onClose: () => void;\r\n  onAfterLeave?: () => void; // optional refresher\r\n}\r\n\r\nexport default function PartyJoinedOverlay({ party, onClose, onAfterLeave }: PartyJoinedOverlayProps) {\r\n  const [members, setMembers] = useState<PartyMember[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [leaving, setLeaving] = useState(false);\r\n  const isHost = party.host_id === (party.host_profile?.id || \"\");\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      setLoading(true);\r\n      const res = await partyMemberService.getPartyMembers(party.id);\r\n      if (mounted) {\r\n        if (res.success && res.members) setMembers(res.members);\r\n        setLoading(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, [party.id]);\r\n\r\n  const getHostDisplay = () => party.host_profile?.nickname || party.host_profile?.full_name || \"Host\";\r\n  const getInitials = (name?: string | null) => {\r\n    if (!name) return \"U\";\r\n    return name.split(\" \").map(w => w[0]?.toUpperCase()).slice(0,2).join(\"\");\r\n  };\r\n\r\n  const handleLeave = async () => {\r\n    const ok = confirm(\"Are you sure you want to leave this party?\");\r\n    if (!ok) return;\r\n    setLeaving(true);\r\n    const res = await partyMemberService.leaveParty(party.id);\r\n    if (!res.success) {\r\n      toast.error(res.error || \"Failed to leave party\");\r\n      setLeaving(false);\r\n      return;\r\n    }\r\n    toast.success(\"Left the party\");\r\n    setLeaving(false);\r\n    onClose();\r\n    onAfterLeave?.();\r\n  };\r\n\r\n  const handleKick = async (member: PartyMember) => {\r\n    if (!isHost) return;\r\n    const ok = confirm(`Kick ${member.profile?.nickname || member.profile?.full_name || 'this user'} from the party?`);\r\n    if (!ok) return;\r\n    try {\r\n      const res = await partyMemberService.kickMember(party.id, member.user_id);\r\n      if (!res.success) return toast.error(res.error || 'Failed to kick');\r\n      toast.success('Member removed');\r\n      setMembers(prev => prev.filter(m => m.user_id !== member.user_id));\r\n    } catch (e) {\r\n      toast.error('Failed to kick');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[70]\">\r\n      {/* Backdrop */}\r\n      <div className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n      {/* Sheet */}\r\n      <div className=\"absolute inset-0 flex items-center justify-center p-4\">\r\n        <div className=\"w-full max-w-3xl rounded-xl border bg-card shadow-2xl overflow-hidden\">\r\n          <div className=\"flex items-center justify-between p-4 border-b\">\r\n            <h2 className=\"text-xl font-semibold\">You joined a party</h2>\r\n            <button aria-label=\"Close\" className=\"p-2 hover:bg-muted rounded-md\" onClick={onClose}>\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"p-5 grid grid-cols-1 md:grid-cols-2 gap-5\">\r\n            {/* Route + host */}\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <Avatar className=\"w-12 h-12\">\r\n                  {party.host_profile?.avatar_url ? (\r\n                    <img src={party.host_profile.avatar_url} alt=\"Host avatar\" className=\"w-full h-full object-cover rounded-full\" />\r\n                  ) : (\r\n                    <AvatarFallback className=\"bg-primary/10 text-primary font-semibold\">\r\n                      {getInitials(party.host_profile?.nickname || party.host_profile?.full_name)}\r\n                    </AvatarFallback>\r\n                  )}\r\n                </Avatar>\r\n                <div className=\"min-w-0\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"font-semibold text-lg truncate\">{getHostDisplay()}</span>\r\n                    <Crown className=\"w-4 h-4 text-primary\" />\r\n                  </div>\r\n                  <div className=\"text-sm text-muted-foreground\">Host</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2 p-3 rounded-lg bg-muted/40\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <MapPin className=\"w-4 h-4 mt-0.5 text-muted-foreground\" />\r\n                  <div className=\"text-sm\">\r\n                    <div><span className=\"text-muted-foreground\">From:</span> <span className=\"font-medium\">{party.meetup_point}</span></div>\r\n                    <div><span className=\"text-muted-foreground\">To:</span> <span className=\"font-medium\">{party.drop_off}</span></div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {party.ride_options && party.ride_options.length > 0 ? party.ride_options.join(\", \") : \"Any ride\"}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"pt-2 space-y-3\">\r\n                {party.host_profile?.show_phone && party.host_profile?.phone_number && (\r\n                  <div className=\"text-sm p-3 rounded-md bg-muted/40\">\r\n                    <div className=\"text-muted-foreground\">Host contact</div>\r\n                    <div className=\"font-semibold\">{party.host_profile.phone_number}</div>\r\n                  </div>\r\n                )}\r\n                <Button variant=\"destructive\" onClick={handleLeave} disabled={leaving} className=\"w-full\">\r\n                  {leaving ? \"Leaving\" : \"Leave Party\"}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Members */}\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center gap-2\"><Users className=\"w-4 h-4\" /><span className=\"font-medium\">Current members</span></div>\r\n              {loading ? (\r\n                <div className=\"space-y-2\">\r\n                  {[...Array(3)].map((_,i)=> (\r\n                    <div key={i} className=\"flex items-center gap-3 p-2 animate-pulse\">\r\n                      <div className=\"w-8 h-8 rounded-full bg-muted\" />\r\n                      <div className=\"h-3 w-28 rounded bg-muted\" />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : members.length === 0 ? (\r\n                <div className=\"text-sm text-muted-foreground\">No other members yet</div>\r\n              ) : (\r\n                <div className=\"space-y-2 max-h-72 overflow-auto pr-1\">\r\n                  {members.map(m => (\r\n                    <div key={m.id} className=\"flex items-center gap-3 p-2 rounded hover:bg-muted/40 justify-between\">\r\n                      <Avatar className=\"w-8 h-8\">\r\n                        {m.profile?.avatar_url ? (\r\n                          <img src={m.profile.avatar_url} className=\"w-full h-full object-cover rounded-full\" alt=\"avatar\" />\r\n                        ) : (\r\n                          <AvatarFallback className=\"bg-secondary/20 text-secondary-foreground font-semibold\">\r\n                            {getInitials(m.profile?.nickname || m.profile?.full_name)}\r\n                          </AvatarFallback>\r\n                        )}\r\n                      </Avatar>\r\n                      <div className=\"truncate text-sm font-medium flex-1\">{m.profile?.nickname || m.profile?.full_name || \"Member\"}</div>\r\n                      {isHost && m.user_id !== party.host_id && (\r\n                        <button\r\n                          className=\"inline-flex items-center gap-1 text-xs px-2 py-1 border rounded hover:bg-accent\"\r\n                          onClick={() => handleKick(m)}\r\n                          title=\"Kick\"\r\n                        >\r\n                          <UserX className=\"w-3 h-3\" /> Kick\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2269, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/DashboardPartyCard.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Party } from \"../types\";\r\nimport { Clock, Users, MapPin, User as UserIcon, Bell, BellOff, Share2, Star, Pencil } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { useAuth } from \"@/context/Authcontext\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\nimport { partyMemberService } from \"../services/partyMemberService\";\r\nimport PartyMembersDialog from \"./PartyMembersDialog\";\r\nimport PartyJoinedOverlay from \"./PartyJoinedOverlay\";\r\n\r\ninterface DashboardPartyCardProps {\r\n    party: Party;\r\n    onPartyUpdate?: () => void;\r\n}\r\n\r\n// Helper function to format remaining time as MM:SS\r\nconst formatTimeLeft = (ms: number): string => {\r\n    const totalSeconds = Math.max(0, Math.floor(ms / 1000));\r\n    const minutes = Math.floor(totalSeconds / 60);\r\n    const seconds = totalSeconds % 60;\r\n    return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\r\n}\r\n\r\nexport default function DashboardPartyCard({ party, onPartyUpdate }: DashboardPartyCardProps) {\r\n    const [editingExpiry, setEditingExpiry] = useState(false);\r\n    const [newExpiry, setNewExpiry] = useState<string>(\"\");\r\n    const [updatingExpiry, setUpdatingExpiry] = useState(false);\r\n    const [showProfileDialog, setShowProfileDialog] = useState(false);\r\n\r\n    // Expiry options (same as creation)\r\n    const expiryOptions = [\"10 min\", \"15 min\", \"20 min\", \"30 min\", \"1 hr\"];\r\n\r\n    // Update expiry handler\r\n    const handleUpdateExpiry = async () => {\r\n        if (!newExpiry || !user) return;\r\n        setUpdatingExpiry(true);\r\n        try {\r\n            // Calculate new expiry timestamp\r\n            const now = new Date();\r\n            const minutes = newExpiry.includes('hr')\r\n                ? parseInt(newExpiry) * 60\r\n                : parseInt(newExpiry);\r\n            now.setMinutes(now.getMinutes() + minutes);\r\n            const newExpiryTimestamp = now.toISOString();\r\n            const supabase = createClient();\r\n            const { error } = await supabase\r\n                .from('parties')\r\n                .update({\r\n                    expires_in: newExpiry,\r\n                    expiry_timestamp: newExpiryTimestamp\r\n                })\r\n                .eq('id', party.id)\r\n                .eq('host_id', user.id);\r\n            if (error) {\r\n                toast.error('Failed to update expiry');\r\n            } else {\r\n                toast.success('Expiry updated!');\r\n                setEditingExpiry(false);\r\n                setNewExpiry(\"\");\r\n                onPartyUpdate?.();\r\n            }\r\n        } catch (e) {\r\n            toast.error('Unexpected error updating expiry');\r\n        } finally {\r\n            setUpdatingExpiry(false);\r\n        }\r\n    };\r\n    // Helper to get the base URL (works for both dev and prod)\r\n    const getBaseUrl = () => {\r\n        if (typeof window !== 'undefined') {\r\n            return window.location.origin;\r\n        }\r\n        return '';\r\n    };\r\n\r\n    // Share handler\r\n    const handleShareParty = async () => {\r\n        const shareUrl = `${getBaseUrl()}/party/${party.id}`;\r\n        const shareText = `Join my party on Meet Riders!\\n${shareUrl}`;\r\n        if (navigator.share) {\r\n            try {\r\n                await navigator.share({\r\n                    title: 'Join my party on Meet Riders!',\r\n                    text: 'Check out this party I created. Click to join!',\r\n                    url: shareUrl,\r\n                });\r\n            } catch (err) {\r\n                // User cancelled or error\r\n            }\r\n        } else if (navigator.clipboard) {\r\n            try {\r\n                await navigator.clipboard.writeText(shareUrl);\r\n                toast.success('Party link copied to clipboard!');\r\n            } catch (err) {\r\n                toast.error('Failed to copy link.');\r\n            }\r\n        } else {\r\n            // fallback: prompt\r\n            window.prompt('Copy this link:', shareUrl);\r\n        }\r\n    };\r\n    const { user } = useAuth();\r\n    const isHost = party.host_id === user?.id;\r\n    const [timeLeft, setTimeLeft] = useState(party.expiry_timestamp.getTime() - Date.now());\r\n    const [alertOn, setAlertOn] = useState<boolean>(false);\r\n    const [isJoining, setIsJoining] = useState(false);\r\n    const [isLeaving, setIsLeaving] = useState(false);\r\n    const [showJoinedOverlay, setShowJoinedOverlay] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const timer = setInterval(() => {\r\n            setTimeLeft(party.expiry_timestamp.getTime() - Date.now());\r\n        }, 1000);\r\n\r\n        return () => clearInterval(timer);\r\n    }, [party.expiry_timestamp]);\r\n\r\n    const isExpired = timeLeft <= 0;\r\n\r\n    const handleJoinParty = async () => {\r\n        if (!user || isHost || party.user_is_member) return;\r\n        \r\n        setIsJoining(true);\r\n        try {\r\n            const result = await partyMemberService.joinParty(party.id);\r\n            \r\n            if (result.success) {\r\n                // Show success message\r\n                toast.success(`Joined party to ${party.drop_off}`);\r\n                setShowJoinedOverlay(true);\r\n                // Trigger refresh of parties data\r\n                onPartyUpdate?.();\r\n            } else {\r\n                toast.error(result.error || 'Failed to join party');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error joining party:', error);\r\n            toast.error('Unexpected error while joining the party');\r\n        } finally {\r\n            setIsJoining(false);\r\n        }\r\n    };\r\n\r\n    const handleLeaveParty = async () => {\r\n        if (!user || !party.user_is_member) return;\r\n        \r\n        const confirmed = confirm('Are you sure you want to leave this party?');\r\n        if (!confirmed) return;\r\n\r\n        setIsLeaving(true);\r\n        try {\r\n            const result = await partyMemberService.leaveParty(party.id);\r\n            \r\n            if (result.success) {\r\n                toast.success('Left the party');\r\n                // Trigger refresh of parties data\r\n                onPartyUpdate?.();\r\n            } else {\r\n                toast.error(result.error || 'Failed to leave party');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error leaving party:', error);\r\n            toast.error('Unexpected error while leaving the party');\r\n        } finally {\r\n            setIsLeaving(false);\r\n        }\r\n    };\r\n\r\n    const handleCancelParty = async () => {\r\n        if (!user || !isHost) return;\r\n\r\n        const confirmed = confirm('Are you sure you want to cancel this party?');\r\n        if (!confirmed) return;\r\n\r\n        try {\r\n            const supabase = createClient();\r\n            const { error } = await supabase\r\n                .from('parties')\r\n                .update({ is_active: false })\r\n                .eq('id', party.id)\r\n                .eq('host_id', user.id);\r\n\r\n            if (error) {\r\n                console.error('Error canceling party:', error);\r\n                toast.error('Failed to cancel party');\r\n            } else {\r\n                toast.success('Party canceled');\r\n                onPartyUpdate?.();\r\n            }\r\n        } catch (error) {\r\n            console.error('Error canceling party:', error);\r\n            toast.error('Failed to cancel party');\r\n        }\r\n    };\r\n\r\n    const getRideOptionsDisplay = () => {\r\n        if (!party.ride_options || party.ride_options.length === 0) {\r\n            return 'Any ride';\r\n        }\r\n        return party.ride_options.join(', ');\r\n    };\r\n\r\n    const getHostDisplayName = () => {\r\n        if (isHost) {\r\n            return 'Your Party';\r\n        }\r\n        \r\n        const profile = party.host_profile;\r\n        if (!profile) {\r\n            return 'Anonymous Host';\r\n        }\r\n        \r\n        return profile.nickname || profile.full_name || 'Anonymous Host';\r\n    };\r\n\r\n    const getHostInitials = () => {\r\n        if (isHost) {\r\n            return 'ME';\r\n        }\r\n        \r\n        const profile = party.host_profile;\r\n        if (!profile) {\r\n            return 'H';\r\n        }\r\n        \r\n        const name = profile.nickname || profile.full_name;\r\n        if (!name) {\r\n            return 'H';\r\n        }\r\n        \r\n        return name\r\n            .split(' ')\r\n            .map(word => word.charAt(0).toUpperCase())\r\n            .slice(0, 2)\r\n            .join('');\r\n    };\r\n\r\n    return (\r\n        <Card className=\"transition-all duration-300 hover:shadow-lg relative overflow-hidden bg-card/60 backdrop-blur-[6.2px]\" \r\n              style={{\r\n                  boxShadow: '0 4px 30px rgba(0, 0, 0, 0.1)',\r\n                  border: '1px solid rgba(255, 255, 255, 0.1)'\r\n              }}>\r\n            {showJoinedOverlay && (\r\n                <PartyJoinedOverlay \r\n                    party={party} \r\n                    onClose={() => setShowJoinedOverlay(false)} \r\n                    onAfterLeave={onPartyUpdate}\r\n                />\r\n            )}\r\n            <div className=\"p-6\">\r\n                {/* Header Row */}\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <button onClick={() => setShowProfileDialog(true)} className=\"focus:outline-none\">\r\n                          <Avatar className=\"w-12 h-12\">\r\n                              {party.host_profile?.avatar_url ? (\r\n                                  <img \r\n                                      src={party.host_profile.avatar_url} \r\n                                      alt=\"Host avatar\" \r\n                                      className=\"w-full h-full object-cover rounded-full\"\r\n                                  />\r\n                              ) : (\r\n                                  <AvatarFallback className=\"bg-primary/10 text-primary font-semibold text-sm\">\r\n                                      {getHostInitials()}\r\n                                  </AvatarFallback>\r\n                              )}\r\n                          </Avatar>\r\n                        </button>\r\n                        {/* Host Profile Popup Dialog */}\r\n                        {showProfileDialog && party.host_profile && (\r\n                            <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\">\r\n                                <div className=\"bg-card rounded-lg shadow-lg p-8 max-w-md w-full relative\">\r\n                                    <button className=\"absolute top-2 right-2 text-xl\" onClick={() => setShowProfileDialog(false)}>&times;</button>\r\n                                    <div className=\"flex flex-col items-center gap-3\">\r\n                                        <Avatar className=\"w-20 h-20\">\r\n                                            {party.host_profile.avatar_url ? (\r\n                                                <img src={party.host_profile.avatar_url} alt=\"Host avatar\" className=\"w-full h-full object-cover rounded-full\" />\r\n                                            ) : (\r\n                                                <AvatarFallback className=\"bg-primary/10 text-primary font-semibold text-2xl\">\r\n                                                    {getHostInitials()}\r\n                                                </AvatarFallback>\r\n                                            )}\r\n                                        </Avatar>\r\n                                        <h2 className=\"text-xl font-bold mt-2\">{party.host_profile.nickname || party.host_profile.full_name || 'Anonymous Host'}</h2>\r\n                                        {party.host_profile.university && (\r\n                                            <div className=\"text-sm text-muted-foreground\">{party.host_profile.university}</div>\r\n                                        )}\r\n                                        {party.host_profile.gender && (\r\n                                            <div className=\"text-sm text-muted-foreground\">Gender: {party.host_profile.gender}</div>\r\n                                        )}\r\n                                        {party.host_profile.points !== null && party.host_profile.points !== undefined && (\r\n                                            <div className=\"text-sm text-muted-foreground\">Points: {party.host_profile.points}</div>\r\n                                        )}\r\n                                        {party.host_profile.bio && (\r\n                                            <div className=\"text-sm text-muted-foreground mt-2 text-center\">{party.host_profile.bio}</div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        <div className=\"min-w-0 flex-1\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                                <h3 className=\"font-semibold text-lg leading-relaxed\">\r\n                                    {getHostDisplayName()}\r\n                                </h3>\r\n                                {isExpired && (\r\n                                    <span className=\"bg-destructive/10 text-destructive px-2 py-0.5 rounded text-xs font-medium\">\r\n                                        EXPIRED\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            {/* Host info in one compact line */}\r\n                            <div className=\"flex items-center gap-2 text-sm text-muted-foreground leading-relaxed\">\r\n                                {party.host_profile?.gender && (\r\n                                    <span className=\"capitalize\">{party.host_profile.gender}</span>\r\n                                )}\r\n                                {party.host_profile?.points !== null && party.host_profile?.points !== undefined && (\r\n                                    <>\r\n                                        {party.host_profile?.gender && <span></span>}\r\n                                        <span className=\"text-primary font-medium\">\r\n                                            {party.host_profile.points} pts\r\n                                        </span>\r\n                                    </>\r\n                                )}\r\n                                {party.host_profile?.university && party.display_university && (\r\n                                    <>\r\n                                        {(party.host_profile?.gender || party.host_profile?.points !== null) && <span></span>}\r\n                                        <div className=\"flex items-center gap-1\">\r\n                                            <Star className=\"w-3 h-3\" />\r\n                                            <span>{party.host_profile.university}</span>\r\n                                        </div>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    {/* Timer with edit icon for host */}\r\n                    <div className=\"text-right px-2 flex flex-col items-end\">\r\n                        <div className=\"flex items-center gap-1\">\r\n                            <div className=\"text-base font-bold text-primary leading-relaxed\">\r\n                                        {isExpired ? '--:--' : formatTimeLeft(timeLeft)}\r\n                            </div>\r\n                            {isHost && !isExpired && (\r\n                                <button\r\n                                    className=\"ml-1 p-1 rounded hover:bg-accent/40 transition-colors\"\r\n                                    title=\"Edit expiry time\"\r\n                                    aria-label=\"Edit expiry time\"\r\n                                    onClick={() => setEditingExpiry((v) => !v)}\r\n                                >\r\n                                    <Pencil className=\"w-4 h-4 text-muted-foreground\" />\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"text-sm text-muted-foreground leading-relaxed\">\r\n                            {isExpired ? 'ended' : ''}\r\n                        </div>\r\n                        {isHost && !isExpired && editingExpiry && (\r\n                            <div className=\"flex items-center gap-2 mt-2\">\r\n                                <select\r\n                                    className=\"border rounded px-2 py-1\"\r\n                                    value={newExpiry}\r\n                                    onChange={e => setNewExpiry(e.target.value)}\r\n                                >\r\n                                    <option value=\"\">Select expiry</option>\r\n                                    {expiryOptions.map(opt => (\r\n                                        <option key={opt} value={opt}>{opt}</option>\r\n                                    ))}\r\n                                </select>\r\n                                <Button size=\"sm\" disabled={updatingExpiry || !newExpiry} onClick={handleUpdateExpiry}>\r\n                                    {updatingExpiry ? 'Updating...' : 'Save'}\r\n                                </Button>\r\n                                <Button size=\"sm\" variant=\"ghost\" onClick={() => setEditingExpiry(false)}>Cancel</Button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Route Info - More Compact */}\r\n                <div className=\"space-y-3 mb-5 px-1\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                        <MapPin className=\"w-5 h-5 text-muted-foreground flex-shrink-0 mt-1\" />\r\n                        <div className=\"min-w-0 flex-1 text-base\">\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                <span className=\"font-medium text-muted-foreground\">From:</span>\r\n                                <span className=\"truncate leading-relaxed\">{party.meetup_point}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"font-medium text-muted-foreground\">To:</span>\r\n                                <span className=\"truncate font-medium leading-relaxed\">{party.drop_off}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {/* Host Comments for joined users */}\r\n                    {party.user_is_member && party.host_comments && (\r\n                        <div className=\"mt-2 p-3 bg-accent/40 rounded border text-base text-foreground\">\r\n                            <span className=\"font-semibold\">Host Comments:</span>\r\n                            <div className=\"mt-1 whitespace-pre-line\">{party.host_comments}</div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Details Row */}\r\n                <div className=\"flex items-center justify-between text-base mb-5 px-1\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <PartyMembersDialog party={party}>\r\n                            <button className=\"flex items-center gap-2 hover:text-primary transition-colors\">\r\n                                <Users className=\"w-5 h-5 text-muted-foreground\" />\r\n                                <span className=\"leading-relaxed\">\r\n                                    {(party.current_member_count || 0) + 1}/{party.party_size}\r\n                                </span>\r\n                            </button>\r\n                        </PartyMembersDialog>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Clock className=\"w-5 h-5 text-muted-foreground\" />\r\n                            <span className=\"text-sm leading-relaxed\">{getRideOptionsDisplay()}</span>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    {party.is_friends_only && (\r\n                        <div className=\"bg-accent/70 px-3 py-1.5 rounded text-xs font-medium\">\r\n                             Friends only\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Action Buttons */}\r\n                <div className=\"flex gap-3 px-1\">\r\n                    {isHost ? (\r\n                        <>\r\n                            <Button \r\n                                variant=\"destructive\" \r\n                                size=\"sm\" \r\n                                onClick={handleCancelParty}\r\n                                className=\"flex-1 h-10 font-medium\"\r\n                            >\r\n                                Cancel Party\r\n                            </Button>\r\n                            <Button variant=\"outline\" size=\"sm\" className=\"h-10 px-3\" onClick={handleShareParty}>\r\n                                <Share2 className=\"w-5 h-5\" />\r\n                            </Button>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            {party.user_is_member ? (\r\n                                <Button \r\n                                    variant=\"outline\"\r\n                                    onClick={handleLeaveParty}\r\n                                    disabled={isLeaving}\r\n                                    className=\"flex-1 h-10 font-medium\"\r\n                                    size=\"sm\"\r\n                                >\r\n                                    {isLeaving ? 'Leaving...' : 'Leave Party'}\r\n                                </Button>\r\n                            ) : (\r\n                                <Button \r\n                                    onClick={handleJoinParty}\r\n                                    disabled={isExpired || isJoining || (party.current_member_count || 0) >= party.party_size}\r\n                                    className=\"flex-1 h-10 font-medium\"\r\n                                    size=\"sm\"\r\n                                    variant={isExpired || (party.current_member_count || 0) >= party.party_size ? \"outline\" : \"default\"}\r\n                                >\r\n                                    {isJoining \r\n                                        ? 'Joining...' \r\n                                        : isExpired \r\n                                        ? 'Expired' \r\n                                        : (party.current_member_count || 0) >= party.party_size \r\n                                        ? 'Full' \r\n                                        : 'Join Party'\r\n                                    }\r\n                                </Button>\r\n                            )}\r\n                            <Button \r\n                                variant=\"outline\" \r\n                                size=\"sm\"\r\n                                onClick={() => setAlertOn(!alertOn)}\r\n                                className=\"h-10 px-3\"\r\n                            >\r\n                                {alertOn ? <BellOff className=\"w-5 h-5\" /> : <Bell className=\"w-5 h-5\" />}\r\n                            </Button>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </Card>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/RidesList.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport DashboardPartyCard from \"./DashboardPartyCard\";\r\nimport { Party } from \"../types\";\r\n\r\ninterface RidesListProps {\r\n  parties: Party[];\r\n  isLoading?: boolean;\r\n  onPartyUpdate?: () => void;\r\n}\r\n\r\nexport default function RidesList({ parties, isLoading = false, onPartyUpdate }: RidesListProps) {\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"bg-card p-6 rounded-lg shadow-md\">\r\n        <h2 className=\"text-2xl font-semibold text-card-foreground mb-4\">Available Rides</h2>\r\n  <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4\">\r\n          {[...Array(3)].map((_, i) => (\r\n            <div key={i} className=\"animate-pulse\">\r\n              <div className=\"h-32 bg-card/60 backdrop-blur-[6.2px] rounded-lg\" \r\n                   style={{\r\n                       boxShadow: '0 4px 30px rgba(0, 0, 0, 0.1)',\r\n                       border: '1px solid rgba(255, 255, 255, 0.1)'\r\n                   }}></div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Filter out expired parties\r\n  const now = Date.now();\r\n  const activeParties = parties.filter(\r\n    (party) => party.expiry_timestamp && new Date(party.expiry_timestamp).getTime() > now\r\n  );\r\n\r\n  return (\r\n    <div className=\" relative z-0\">\r\n      <h2 className=\"text-2xl font-semibold text-card-foreground mb-4\">Available Rides</h2>\r\n\r\n      {activeParties.length === 0 ? (\r\n        <EmptyRidesState />\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4\">\r\n          {activeParties.map((party) => (\r\n            <DashboardPartyCard \r\n              key={party.id} \r\n              party={party} \r\n              onPartyUpdate={onPartyUpdate}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction EmptyRidesState() {\r\n  return (\r\n    <div className=\"text-center py-10 border-2 border-dashed border-border rounded-lg\">\r\n      <p className=\"text-muted-foreground mb-4\">\r\n        No rides match your filters right now.\r\n      </p>\r\n      <Link\r\n        href=\"/hostparty\"\r\n        className=\"inline-block px-6 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:bg-primary/90 transition-colors duration-300 shadow\"\r\n      >\r\n        Host a Ride\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAYe,SAAS,UAAU,EAAE,OAAO,EAAE,YAAY,KAAK,EAAE,aAAa,EAAkB;IAC7F,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAmD;;;;;;8BACvE,8OAAC;oBAAI,WAAU;8BACN;2BAAI,MAAM;qBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,8OAAC;4BAAY,WAAU;sCACrB,cAAA,8OAAC;gCAAI,WAAU;gCACV,OAAO;oCACH,WAAW;oCACX,QAAQ;gCACZ;;;;;;2BALG;;;;;;;;;;;;;;;;IAWpB;IAEA,6BAA6B;IAC7B,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,gBAAgB,QAAQ,MAAM,CAClC,CAAC,QAAU,MAAM,gBAAgB,IAAI,IAAI,KAAK,MAAM,gBAAgB,EAAE,OAAO,KAAK;IAGpF,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAmD;;;;;;YAEhE,cAAc,MAAM,KAAK,kBACxB,8OAAC;;;;qCAED,8OAAC;gBAAI,WAAU;0BACZ,cAAc,GAAG,CAAC,CAAC,sBAClB,8OAAC,wKAAA,CAAA,UAAkB;wBAEjB,OAAO;wBACP,eAAe;uBAFV,MAAM,EAAE;;;;;;;;;;;;;;;;AAS3B;AAEA,SAAS;IACP,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;0BAG1C,8OAAC,4JAAA,CAAA,UAAI;gBACH,MAAK;gBACL,WAAU;0BACX;;;;;;;;;;;;AAKP","debugId":null}},
    {"offset": {"line": 3307, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/LoadingScreen.tsx"],"sourcesContent":["interface LoadingScreenProps {\r\n  message?: string;\r\n}\r\n\r\nexport default function LoadingScreen({ message = \"Loading your dashboard...\" }: LoadingScreenProps) {\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen\">\r\n      <div className=\"text-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n        <p className=\"text-xl text-muted-foreground\">{message}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAIe,SAAS,cAAc,EAAE,UAAU,2BAA2B,EAAsB;IACjG,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAE,WAAU;8BAAiC;;;;;;;;;;;;;;;;;AAItD","debugId":null}},
    {"offset": {"line": 3349, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/services/soiMemberService.ts"],"sourcesContent":["import { createClient } from \"@/utils/supabase/client\";\r\nimport type { SoiMember } from \"../types\";\r\n\r\nexport class SoiMemberService {\r\n  private supabase = createClient();\r\n\r\n  async join(soiId: number): Promise<{ success: boolean; error?: string; member?: SoiMember }> {\r\n    try {\r\n      const { data: { user } } = await this.supabase.auth.getUser();\r\n      if (!user) return { success: false, error: \"Not authenticated\" };\r\n\r\n      const { data: member, error } = await this.supabase\r\n        .from('soi_members')\r\n        .insert({ soi_id: soiId, user_id: user.id, status: 'joined' })\r\n        .select(`*, profile:user_id ( id, full_name, nickname, avatar_url, gender, points, university, show_university )`)\r\n        .single();\r\n\r\n      if (error) return { success: false, error: error.message };\r\n\r\n      const transformed: SoiMember = {\r\n        ...member,\r\n        joined_at: new Date(member.joined_at),\r\n        left_at: member.left_at ? new Date(member.left_at) : undefined,\r\n        created_at: member.created_at ? new Date(member.created_at) : undefined,\r\n        updated_at: member.updated_at ? new Date(member.updated_at) : undefined,\r\n      };\r\n      return { success: true, member: transformed };\r\n    } catch (e: any) {\r\n      return { success: false, error: e?.message || 'Join failed' };\r\n    }\r\n  }\r\n\r\n  async leave(soiId: number): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const { data: { user } } = await this.supabase.auth.getUser();\r\n      if (!user) return { success: false, error: \"Not authenticated\" };\r\n      const { error } = await this.supabase\r\n        .from('soi_members')\r\n        .update({ status: 'left', left_at: new Date().toISOString() })\r\n        .eq('soi_id', soiId)\r\n        .eq('user_id', user.id)\r\n        .eq('status', 'joined');\r\n      if (error) return { success: false, error: error.message };\r\n      return { success: true };\r\n    } catch (e: any) {\r\n      return { success: false, error: e?.message || 'Leave failed' };\r\n    }\r\n  }\r\n}\r\n\r\nexport const soiMemberService = new SoiMemberService();\r\n"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM;IACH,WAAW,CAAA,GAAA,kIAAA,CAAA,eAAY,AAAD,IAAI;IAElC,MAAM,KAAK,KAAa,EAAqE;QAC3F,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO;YAC3D,IAAI,CAAC,MAAM,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAoB;YAE/D,MAAM,EAAE,MAAM,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,QAAQ,CAChD,IAAI,CAAC,eACL,MAAM,CAAC;gBAAE,QAAQ;gBAAO,SAAS,KAAK,EAAE;gBAAE,QAAQ;YAAS,GAC3D,MAAM,CAAC,CAAC,uGAAuG,CAAC,EAChH,MAAM;YAET,IAAI,OAAO,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;YAEzD,MAAM,cAAyB;gBAC7B,GAAG,MAAM;gBACT,WAAW,IAAI,KAAK,OAAO,SAAS;gBACpC,SAAS,OAAO,OAAO,GAAG,IAAI,KAAK,OAAO,OAAO,IAAI;gBACrD,YAAY,OAAO,UAAU,GAAG,IAAI,KAAK,OAAO,UAAU,IAAI;gBAC9D,YAAY,OAAO,UAAU,GAAG,IAAI,KAAK,OAAO,UAAU,IAAI;YAChE;YACA,OAAO;gBAAE,SAAS;gBAAM,QAAQ;YAAY;QAC9C,EAAE,OAAO,GAAQ;YACf,OAAO;gBAAE,SAAS;gBAAO,OAAO,GAAG,WAAW;YAAc;QAC9D;IACF;IAEA,MAAM,MAAM,KAAa,EAAiD;QACxE,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO;YAC3D,IAAI,CAAC,MAAM,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAoB;YAC/D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,IAAI,CAAC,eACL,MAAM,CAAC;gBAAE,QAAQ;gBAAQ,SAAS,IAAI,OAAO,WAAW;YAAG,GAC3D,EAAE,CAAC,UAAU,OACb,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,UAAU;YAChB,IAAI,OAAO,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;YACzD,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,GAAQ;YACf,OAAO;gBAAE,SAAS;gBAAO,OAAO,GAAG,WAAW;YAAe;QAC/D;IACF;AACF;AAEO,MAAM,mBAAmB,IAAI","debugId":null}},
    {"offset": {"line": 3422, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/services/soiPartyService.ts"],"sourcesContent":["import { createClient } from \"@/utils/supabase/client\";\r\n\r\nexport class SoiPartyService {\r\n  private supabase = createClient();\r\n\r\n  async cancel(soiId: number): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const { data: { user } } = await this.supabase.auth.getUser();\r\n      if (!user) return { success: false, error: \"Not authenticated\" };\r\n\r\n      const { error } = await this.supabase\r\n        .from('soi_parties')\r\n        .update({ is_active: false })\r\n        .eq('id', soiId)\r\n        .eq('host_id', user.id)\r\n        .eq('is_active', true);\r\n      if (error) return { success: false, error: error.message };\r\n      return { success: true };\r\n    } catch (e: any) {\r\n      return { success: false, error: e?.message || 'Cancel failed' };\r\n    }\r\n  }\r\n}\r\n\r\nexport const soiPartyService = new SoiPartyService();\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM;IACH,WAAW,CAAA,GAAA,kIAAA,CAAA,eAAY,AAAD,IAAI;IAElC,MAAM,OAAO,KAAa,EAAiD;QACzE,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO;YAC3D,IAAI,CAAC,MAAM,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAoB;YAE/D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,IAAI,CAAC,eACL,MAAM,CAAC;gBAAE,WAAW;YAAM,GAC1B,EAAE,CAAC,MAAM,OACT,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,EAAE,CAAC,aAAa;YACnB,IAAI,OAAO,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;YACzD,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,GAAQ;YACf,OAAO;gBAAE,SAAS;gBAAO,OAAO,GAAG,WAAW;YAAgB;QAChE;IACF;AACF;AAEO,MAAM,kBAAkB,IAAI","debugId":null}},
    {"offset": {"line": 3460, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/SoiList.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\nimport type { SoiParty, SoiMember } from \"../types\";\r\nimport { soiMemberService } from \"../services/soiMemberService\";\r\nimport { soiPartyService } from \"../services/soiPartyService\";\r\nimport { toast } from \"sonner\";\r\n\r\nfunction formatCountdown(target?: Date | null) {\r\n  if (!target) return \"\";\r\n  const now = new Date().getTime();\r\n  const diff = new Date(target).getTime() - now;\r\n  if (diff <= 0) return \"starting now\";\r\n  const mins = Math.floor(diff / 60000);\r\n  if (mins < 60) return `${mins}m`;\r\n  const hrs = Math.floor(mins / 60);\r\n  const rem = mins % 60;\r\n  return `${hrs}h ${rem}m`;\r\n}\r\n\r\nexport default function SoiList() {\r\n  const supabase = createClient();\r\n  const [items, setItems] = useState<SoiParty[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [now, setNow] = useState(Date.now());\r\n  const [userId, setUserId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const id = setInterval(() => setNow(Date.now()), 30_000);\r\n    return () => clearInterval(id);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      setUserId(user?.id ?? null);\r\n    })();\r\n  }, [supabase]);\r\n\r\n  useEffect(() => {\r\n    const fetchSOIs = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      // active SOIs that haven't started more than 10 minutes ago\r\n      const { data, error } = await supabase\r\n        .from(\"soi_parties\")\r\n        .select(\"*\")\r\n        .eq(\"is_active\", true)\r\n        .gte(\"start_time\", new Date(Date.now() - 10 * 60 * 1000).toISOString())\r\n        .order(\"start_time\", { ascending: true });\r\n\r\n      if (error) {\r\n        setError(error.message);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const list: SoiParty[] = (data || []).map((r: any) => ({\r\n        id: r.id,\r\n        created_at: new Date(r.created_at),\r\n        host_id: r.host_id,\r\n        party_size: r.party_size,\r\n        meetup_point: r.meetup_point,\r\n        drop_off: r.drop_off,\r\n        ride_options: r.ride_options || [],\r\n        start_time: new Date(r.start_time),\r\n        expiry_timestamp: r.expiry_timestamp ? new Date(r.expiry_timestamp) : null,\r\n        host_university: r.host_university,\r\n        display_university: r.display_university,\r\n        is_active: r.is_active,\r\n      } as SoiParty));\r\n\r\n      // fetch member counts via RPC and add +1 for host\r\n      const withCounts = await Promise.all(\r\n        list.map(async (item) => {\r\n          try {\r\n            const { data: countData, error: countErr } = await supabase.rpc('get_soi_member_count', { p_soi_id: item.id });\r\n            const count = typeof countData === 'number' ? countData : (countData?.count ?? 0);\r\n            return { ...item, current_member_count: (count || 0) + 1 } as SoiParty;\r\n          } catch {\r\n            return { ...item, current_member_count: 1 } as SoiParty;\r\n          }\r\n        })\r\n      );\r\n\r\n      setItems(withCounts);\r\n      setLoading(false);\r\n    };\r\n    fetchSOIs();\r\n  }, [supabase]);\r\n\r\n  const handleJoin = async (id: number) => {\r\n    const res = await soiMemberService.join(id);\r\n  if (!res.success) return toast.error(res.error || 'Failed to join');\r\n  toast.success('Joined');\r\n    // refresh list\r\n    const idx = items.findIndex(x => x.id === id);\r\n    if (idx >= 0) {\r\n      const updated = [...items];\r\n      updated[idx] = { ...updated[idx], current_member_count: (updated[idx].current_member_count || 0) + 1 };\r\n      setItems(updated);\r\n    }\r\n  };\r\n\r\n  const handleLeave = async (id: number) => {\r\n    const res = await soiMemberService.leave(id);\r\n  if (!res.success) return toast.error(res.error || 'Failed to leave');\r\n  toast.success('Left');\r\n    const idx = items.findIndex(x => x.id === id);\r\n    if (idx >= 0) {\r\n      const updated = [...items];\r\n      updated[idx] = { ...updated[idx], current_member_count: Math.max(0, (updated[idx].current_member_count || 0) - 1) };\r\n      setItems(updated);\r\n    }\r\n  };\r\n\r\n  const handleCancel = async (id: number) => {\r\n    if (!confirm('Cancel this SOI? This will close it for everyone.')) return;\r\n    const res = await soiPartyService.cancel(id);\r\n  if (!res.success) return toast.error(res.error || 'Failed to cancel SOI');\r\n  toast.success('SOI canceled');\r\n    setItems(prev => prev.filter(x => x.id !== id));\r\n  };\r\n\r\n  if (loading) return <div className=\"text-sm text-muted-foreground\">Loading upcoming rides</div>;\r\n  if (error) return <div className=\"text-sm text-destructive\">{error}</div>;\r\n  if (!items.length) return <div className=\"text-sm text-muted-foreground\">No upcoming rides.</div>;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-6\">\r\n      {items.map((s) => {\r\n        const full = (s.current_member_count || 0) >= s.party_size;\r\n        const countdown = formatCountdown(s.start_time);\r\n        const isHost = userId && userId === s.host_id;\r\n        return (\r\n          <div key={s.id} className=\"bg-card border rounded-lg p-4 flex flex-col gap-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"font-semibold text-card-foreground\">{s.meetup_point}</div>\r\n              <div className=\"text-xs text-muted-foreground\">Starts in {countdown}</div>\r\n            </div>\r\n            <div className=\"text-sm text-muted-foreground\"> {s.drop_off}</div>\r\n            <div className=\"text-xs text-muted-foreground\">{(s.ride_options || []).join(\", \")}</div>\r\n            <div className=\"text-sm\">{s.current_member_count}/{s.party_size} interested</div>\r\n            <div className=\"mt-2 flex gap-3\">\r\n              {isHost ? (\r\n                <button\r\n                  className=\"px-4 py-2 rounded-md text-sm border border-destructive text-destructive hover:bg-destructive/10\"\r\n                  onClick={() => handleCancel(s.id)}\r\n                >\r\n                  Cancel SOI\r\n                </button>\r\n              ) : (\r\n                <>\r\n                  <button\r\n                    className={`px-4 py-2 rounded-md text-sm ${full ? 'bg-muted text-muted-foreground cursor-not-allowed' : 'bg-primary text-primary-foreground hover:bg-primary/90'}`}\r\n                    disabled={full}\r\n                    onClick={() => handleJoin(s.id)}\r\n                  >\r\n                    I'm in\r\n                  </button>\r\n                  <button\r\n                    className=\"px-4 py-2 rounded-md text-sm border hover:bg-accent\"\r\n                    onClick={() => handleLeave(s.id)}\r\n                  >\r\n                    Change my mind\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3746, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/services/expiredPartyService.ts"],"sourcesContent":["import { createClient } from \"@/utils/supabase/client\";\r\nimport type { ExpiredParty } from \"../types\";\r\n\r\nexport class ExpiredPartyService {\r\n  private supabase = createClient();\r\n\r\n  async listRecent(): Promise<{ items: ExpiredParty[]; error?: string }> {\r\n    try {\r\n      const since = new Date(Date.now() - 10 * 60 * 1000).toISOString();\r\n      const { data, error } = await this.supabase\r\n        .from('expired_parties')\r\n        .select('*, host_profile:profiles!expired_parties_host_id_fkey(id, nickname, full_name)')\r\n        .gte('expired_at', since)\r\n        .order('expired_at', { ascending: false });\r\n      if (error) return { items: [], error: error.message };\r\n      const items: ExpiredParty[] = (data || []).map((r: any) => ({\r\n        id: r.id,\r\n        party_id: r.party_id,\r\n        host_id: r.host_id,\r\n        meetup_point: r.meetup_point,\r\n        drop_off: r.drop_off,\r\n        ride_options: r.ride_options || [],\r\n        party_size: r.party_size || undefined,\r\n        expired_at: new Date(r.expired_at),\r\n        host_profile: r.host_profile ? {\r\n          ...r.host_profile,\r\n          created_at: undefined,\r\n          updated_at: undefined,\r\n          birth_date: undefined,\r\n          major: undefined,\r\n          bio: undefined,\r\n          gender: undefined,\r\n          ideal_departure_time: undefined,\r\n          ideal_location: undefined,\r\n          nickname: r.host_profile?.nickname ?? null,\r\n          full_name: r.host_profile?.full_name ?? null,\r\n          avatar_url: undefined,\r\n          points: undefined,\r\n          university: undefined,\r\n          show_university: undefined,\r\n          location: undefined,\r\n          isGenderOnly: undefined,\r\n          rideOptions: undefined,\r\n          expiresIn: undefined,\r\n        } : undefined,\r\n      }));\r\n      return { items };\r\n    } catch (e: any) {\r\n      return { items: [], error: e?.message || 'Failed to load expired parties' };\r\n    }\r\n  }\r\n\r\n  async restore(expiredId: number): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n      const { data: { user } } = await this.supabase.auth.getUser();\r\n      if (!user) return { success: false, error: 'Not authenticated' };\r\n      const { error } = await this.supabase.rpc('restore_expired_party', { p_expired_id: expiredId });\r\n      if (error) return { success: false, error: error.message };\r\n      return { success: true };\r\n    } catch (e: any) {\r\n      return { success: false, error: e?.message || 'Failed to restore party' };\r\n    }\r\n  }\r\n}\r\n\r\nexport const expiredPartyService = new ExpiredPartyService();\r\n"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM;IACH,WAAW,CAAA,GAAA,kIAAA,CAAA,eAAY,AAAD,IAAI;IAElC,MAAM,aAAiE;QACrE,IAAI;YACF,MAAM,QAAQ,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,MAAM,WAAW;YAC/D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,QAAQ,CACxC,IAAI,CAAC,mBACL,MAAM,CAAC,kFACP,GAAG,CAAC,cAAc,OAClB,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAC1C,IAAI,OAAO,OAAO;gBAAE,OAAO,EAAE;gBAAE,OAAO,MAAM,OAAO;YAAC;YACpD,MAAM,QAAwB,CAAC,QAAQ,EAAE,EAAE,GAAG,CAAC,CAAC,IAAW,CAAC;oBAC1D,IAAI,EAAE,EAAE;oBACR,UAAU,EAAE,QAAQ;oBACpB,SAAS,EAAE,OAAO;oBAClB,cAAc,EAAE,YAAY;oBAC5B,UAAU,EAAE,QAAQ;oBACpB,cAAc,EAAE,YAAY,IAAI,EAAE;oBAClC,YAAY,EAAE,UAAU,IAAI;oBAC5B,YAAY,IAAI,KAAK,EAAE,UAAU;oBACjC,cAAc,EAAE,YAAY,GAAG;wBAC7B,GAAG,EAAE,YAAY;wBACjB,YAAY;wBACZ,YAAY;wBACZ,YAAY;wBACZ,OAAO;wBACP,KAAK;wBACL,QAAQ;wBACR,sBAAsB;wBACtB,gBAAgB;wBAChB,UAAU,EAAE,YAAY,EAAE,YAAY;wBACtC,WAAW,EAAE,YAAY,EAAE,aAAa;wBACxC,YAAY;wBACZ,QAAQ;wBACR,YAAY;wBACZ,iBAAiB;wBACjB,UAAU;wBACV,cAAc;wBACd,aAAa;wBACb,WAAW;oBACb,IAAI;gBACN,CAAC;YACD,OAAO;gBAAE;YAAM;QACjB,EAAE,OAAO,GAAQ;YACf,OAAO;gBAAE,OAAO,EAAE;gBAAE,OAAO,GAAG,WAAW;YAAiC;QAC5E;IACF;IAEA,MAAM,QAAQ,SAAiB,EAAiD;QAC9E,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO;YAC3D,IAAI,CAAC,MAAM,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAoB;YAC/D,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,yBAAyB;gBAAE,cAAc;YAAU;YAC7F,IAAI,OAAO,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;YACzD,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,GAAQ;YACf,OAAO;gBAAE,SAAS;gBAAO,OAAO,GAAG,WAAW;YAA0B;QAC1E;IACF;AACF;AAEO,MAAM,sBAAsB,IAAI","debugId":null}},
    {"offset": {"line": 3835, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/components/ExpiredPanel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { expiredPartyService } from \"../services/expiredPartyService\";\r\nimport type { ExpiredParty } from \"../types\";\r\nimport { RotateCcw } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function ExpiredPanel() {\r\n  const [items, setItems] = useState<ExpiredParty[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const load = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    const res = await expiredPartyService.listRecent();\r\n    if (res.error) setError(res.error);\r\n    setItems(res.items);\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    load();\r\n    const id = setInterval(load, 60_000); // refresh every minute\r\n    return () => clearInterval(id);\r\n  }, []);\r\n\r\n  const restore = async (expiredId: number) => {\r\n    const res = await expiredPartyService.restore(expiredId);\r\n    if (!res.success) return toast.error(res.error || 'Failed to restore');\r\n    toast.success('Party restored');\r\n    setItems(prev => prev.filter(i => i.id !== expiredId));\r\n  };\r\n\r\n  return (\r\n    <aside className=\"hidden xl:flex flex-col w-80 shrink-0 border-l pl-4 sticky top-0 h-[calc(100vh-80px)]\">\r\n      <h3 className=\"text-lg font-semibold text-card-foreground mb-3\">Expired recently</h3>\r\n      <div className=\"flex-1 overflow-auto space-y-3 pr-2\">\r\n        {loading && <div className=\"text-sm text-muted-foreground\">Loading</div>}\r\n        {error && (\r\n          <div className=\"text-sm text-destructive\">\r\n            {error.includes('expired_parties') || error.toLowerCase().includes('relation')\r\n              ? 'Expired table not found. Run the SQL to create public.expired_parties to enable this panel.'\r\n              : error}\r\n          </div>\r\n        )}\r\n        {!loading && !error && items.length === 0 && null}\r\n        {items.map(item => (\r\n          <div key={item.id} className=\"border rounded-lg p-3 bg-card\">\r\n            <div className=\"text-xs text-muted-foreground truncate\">{item.host_profile?.nickname || item.host_profile?.full_name || 'Host'}</div>\r\n            <div className=\"text-sm font-medium truncate\">{item.meetup_point}</div>\r\n            <div className=\"text-xs text-muted-foreground truncate\"> {item.drop_off}</div>\r\n            <div className=\"mt-2 flex justify-between items-center\">\r\n              <span className=\"text-xs text-muted-foreground\">Expired {timeAgo(item.expired_at)}</span>\r\n              <button\r\n                className=\"inline-flex items-center gap-1 text-xs px-2 py-1 border rounded hover:bg-accent\"\r\n                onClick={() => restore(item.id)}\r\n                title=\"Restore\"\r\n              >\r\n                <RotateCcw className=\"w-3 h-3\" /> Restore\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n\r\nfunction timeAgo(date: Date) {\r\n  const diff = Math.floor((Date.now() - date.getTime()) / 60000);\r\n  if (diff <= 0) return 'now';\r\n  if (diff < 60) return `${diff}m ago`;\r\n  const h = Math.floor(diff / 60);\r\n  const m = diff % 60;\r\n  return `${h}h ${m}m ago`;\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB,EAAE;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,MAAM,OAAO;QACX,WAAW;QACX,SAAS;QACT,MAAM,MAAM,MAAM,sKAAA,CAAA,sBAAmB,CAAC,UAAU;QAChD,IAAI,IAAI,KAAK,EAAE,SAAS,IAAI,KAAK;QACjC,SAAS,IAAI,KAAK;QAClB,WAAW;IACb;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;QACA,MAAM,KAAK,YAAY,MAAM,SAAS,uBAAuB;QAC7D,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,MAAM,UAAU,OAAO;QACrB,MAAM,MAAM,MAAM,sKAAA,CAAA,sBAAmB,CAAC,OAAO,CAAC;QAC9C,IAAI,CAAC,IAAI,OAAO,EAAE,OAAO,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC,IAAI,KAAK,IAAI;QAClD,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;QACd,SAAS,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC7C;IAEA,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAG,WAAU;0BAAkD;;;;;;0BAChE,8OAAC;gBAAI,WAAU;;oBACZ,yBAAW,8OAAC;wBAAI,WAAU;kCAAgC;;;;;;oBAC1D,uBACC,8OAAC;wBAAI,WAAU;kCACZ,MAAM,QAAQ,CAAC,sBAAsB,MAAM,WAAW,GAAG,QAAQ,CAAC,cAC/D,gGACA;;;;;;oBAGP,CAAC,WAAW,CAAC,SAAS,MAAM,MAAM,KAAK,KAAK;oBAC5C,MAAM,GAAG,CAAC,CAAA,qBACT,8OAAC;4BAAkB,WAAU;;8CAC3B,8OAAC;oCAAI,WAAU;8CAA0C,KAAK,YAAY,EAAE,YAAY,KAAK,YAAY,EAAE,aAAa;;;;;;8CACxH,8OAAC;oCAAI,WAAU;8CAAgC,KAAK,YAAY;;;;;;8CAChE,8OAAC;oCAAI,WAAU;;wCAAyC;wCAAG,KAAK,QAAQ;;;;;;;8CACxE,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAU;;gDAAgC;gDAAS,QAAQ,KAAK,UAAU;;;;;;;sDAChF,8OAAC;4CACC,WAAU;4CACV,SAAS,IAAM,QAAQ,KAAK,EAAE;4CAC9B,OAAM;;8DAEN,8OAAC,gNAAA,CAAA,YAAS;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;;;;2BAX7B,KAAK,EAAE;;;;;;;;;;;;;;;;;AAmB3B;AAEA,SAAS,QAAQ,IAAU;IACzB,MAAM,OAAO,KAAK,KAAK,CAAC,CAAC,KAAK,GAAG,KAAK,KAAK,OAAO,EAAE,IAAI;IACxD,IAAI,QAAQ,GAAG,OAAO;IACtB,IAAI,OAAO,IAAI,OAAO,GAAG,KAAK,KAAK,CAAC;IACpC,MAAM,IAAI,KAAK,KAAK,CAAC,OAAO;IAC5B,MAAM,IAAI,OAAO;IACjB,OAAO,GAAG,EAAE,EAAE,EAAE,EAAE,KAAK,CAAC;AAC1B","debugId":null}},
    {"offset": {"line": 4003, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/hooks/useDashboard.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/context/Authcontext\";\r\nimport { createClient } from \"@/utils/supabase/client\";\r\nimport { Party, UserProfile } from \"../types\";\r\n\r\nexport function useDashboard() {\r\n  const { user, loading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  // User profile state\r\n  const [welcomeName, setWelcomeName] = useState<string | null>(null);\r\n  const [isCheckingProfile, setIsCheckingProfile] = useState(true);\r\n  const [viewerUniversity, setViewerUniversity] = useState<string | null>(null);\r\n\r\n  // Parties state\r\n  const [parties, setParties] = useState<Party[]>([]);\r\n  const [partiesLoading, setPartiesLoading] = useState(true);\r\n\r\n  // Filter state\r\n  const [destinationQuery, setDestinationQuery] = useState(\"\");\r\n  const [timeWindowMins, setTimeWindowMins] = useState<string>(\"any\");\r\n  const [sameDepartment, setSameDepartment] = useState(false);\r\n  const [sameYear, setSameYear] = useState(false);\r\n  const [showFriendsOnly, setShowFriendsOnly] = useState(false);\r\n  const [showMyUniversityOnly, setShowMyUniversityOnly] = useState(false);\r\n\r\n  // Profile check effect\r\n  useEffect(() => {\r\n    if (!loading && user) {\r\n      checkUserProfile();\r\n      fetchParties();\r\n    } else if (!loading && !user) {\r\n      router.push(\"/login\");\r\n    }\r\n  }, [user, loading, router]);\r\n\r\n  // Set up periodic refresh for parties\r\n  useEffect(() => {\r\n    if (!user || loading) return;\r\n\r\n    const interval = setInterval(() => {\r\n      fetchParties();\r\n    }, 30000); // Refresh every 30 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, [user, loading]);\r\n\r\n  // Fetch parties from Supabase\r\n  const fetchParties = async () => {\r\n    try {\r\n      setPartiesLoading(true);\r\n      const supabase = createClient();\r\n      \r\n      // First, fetch the parties\r\n      const { data: partiesData, error } = await supabase\r\n        .from('parties')\r\n        .select(`\r\n          id,\r\n          created_at,\r\n          host_id,\r\n          party_size,\r\n          meetup_point,\r\n          drop_off,\r\n          is_friends_only,\r\n          is_gender_only,\r\n          ride_options,\r\n          expires_in,\r\n          expiry_timestamp,\r\n          host_university,\r\n          display_university,\r\n          is_active\r\n        `)\r\n        .eq('is_active', true)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) {\r\n        console.error('Error fetching parties:', error);\r\n        return;\r\n      }\r\n\r\n      if (!partiesData || partiesData.length === 0) {\r\n        setParties([]);\r\n        return;\r\n      }\r\n\r\n      // Get unique host IDs\r\n      const hostIds = [...new Set(partiesData.map(party => party.host_id))];\r\n\r\n      // Fetch profiles for all hosts\r\n      const { data: profilesData, error: profilesError } = await supabase\r\n        .from('profiles')\r\n        .select(`\r\n          id,\r\n          full_name,\r\n          nickname,\r\n          gender,\r\n          avatar_url,\r\n          university,\r\n          points,\r\n          phone_number,\r\n          show_phone,\r\n          major,\r\n          bio\r\n        `)\r\n        .in('id', hostIds);\r\n\r\n      if (profilesError) {\r\n        console.error('Error fetching profiles:', profilesError);\r\n      }\r\n\r\n      // Create a map of profiles by ID for easy lookup\r\n      const profilesMap = new Map();\r\n      profilesData?.forEach(profile => {\r\n        profilesMap.set(profile.id, profile);\r\n      });\r\n\r\n      // Get party IDs to fetch member counts and user memberships\r\n      const partyIds = partiesData.map(party => party.id);\r\n\r\n      // Fetch member counts for all parties\r\n      const memberCountPromises = partyIds.map(async (partyId) => {\r\n        const { data: count } = await supabase\r\n          .rpc('get_party_member_count', { party_bigint: partyId });\r\n        return { partyId, count: count || 0 };\r\n      });\r\n\r\n      const memberCounts = await Promise.all(memberCountPromises);\r\n      const memberCountsMap = new Map();\r\n      memberCounts.forEach(({ partyId, count }) => {\r\n        memberCountsMap.set(partyId, count);\r\n      });\r\n\r\n      // Check if current user is a member of any parties\r\n      const { data: userMemberships } = await supabase\r\n        .from('party_members')\r\n        .select('party_id')\r\n        .eq('user_id', user?.id)\r\n        .eq('status', 'joined')\r\n        .in('party_id', partyIds);\r\n\r\n      const userMembershipSet = new Set(\r\n        userMemberships?.map(membership => membership.party_id) || []\r\n      );\r\n\r\n      // Transform the data to ensure dates are proper Date objects and add host profiles\r\n      const transformedParties = partiesData.map(party => ({\r\n        ...party,\r\n        created_at: new Date(party.created_at),\r\n        expiry_timestamp: new Date(party.expiry_timestamp),\r\n        host_profile: profilesMap.get(party.host_id) || null,\r\n        current_member_count: memberCountsMap.get(party.id) || 0,\r\n        user_is_member: userMembershipSet.has(party.id),\r\n      })) as Party[];\r\n\r\n      setParties(transformedParties);\r\n    } catch (error) {\r\n      console.error('Failed to fetch parties:', error);\r\n      // Set empty array on error to prevent UI issues\r\n      setParties([]);\r\n    } finally {\r\n      setPartiesLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkUserProfile = async () => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const supabase = createClient();\r\n      const { data: profile, error } = await supabase\r\n        .from('profiles')\r\n        .select('nickname, full_name, university')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n      if (error) {\r\n        console.error('Error fetching profile:', error);\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      if (profile && (profile.nickname || profile.full_name)) {\r\n        const nameToDisplay = profile.nickname || profile.full_name || 'Rider';\r\n        setWelcomeName(nameToDisplay);\r\n        setViewerUniversity(profile.university || null);\r\n        setIsCheckingProfile(false);\r\n      } else {\r\n        router.push('/user-create');\r\n      }\r\n    } catch (error) {\r\n      console.error('Profile check failed:', error);\r\n      router.push('/login');\r\n    }\r\n  };\r\n\r\n  // Filtered parties based on search and filters\r\n  const filteredParties = useMemo(() => {\r\n    const query = destinationQuery.trim().toLowerCase();\r\n    const maxMs = timeWindowMins === \"any\" ? Infinity : parseInt(timeWindowMins, 10) * 60_000;\r\n    const now = Date.now();\r\n\r\n    return parties.filter((party: Party) => {\r\n      const matchesDestination = \r\n        query === \"\" || \r\n        party.drop_off.toLowerCase().includes(query) || \r\n        party.meetup_point.toLowerCase().includes(query);\r\n      \r\n      const timeLeft = party.expiry_timestamp.getTime() - now;\r\n      const matchesTime = maxMs === Infinity || (timeLeft > 0 && timeLeft <= maxMs);\r\n\r\n      // Friends filter\r\n      const matchesFriends = !showFriendsOnly || party.is_friends_only;\r\n      // University filter\r\n      const matchesUniversity = !showMyUniversityOnly || (\r\n        viewerUniversity && party.host_university === viewerUniversity\r\n      );\r\n\r\n      return matchesDestination && matchesTime && matchesFriends && matchesUniversity;\r\n    });\r\n  }, [parties, destinationQuery, timeWindowMins, showFriendsOnly, showMyUniversityOnly, viewerUniversity]);\r\n\r\n  // Ordered parties: friends first, then same university, then others\r\n  const orderedParties = useMemo(() => {\r\n    // Placeholder: if you have a real friends table, wire it here.\r\n    // For now, treat party.is_friends_only as \"friends-hosted\" category.\r\n    const friends: Party[] = [];\r\n    const sameUniversity: Party[] = [];\r\n    const others: Party[] = [];\r\n\r\n    for (const party of filteredParties) {\r\n      if (party.is_friends_only) {\r\n        friends.push(party);\r\n        continue;\r\n      }\r\n      if (\r\n        viewerUniversity &&\r\n        party.host_university &&\r\n        party.display_university &&\r\n        party.host_university === viewerUniversity\r\n      ) {\r\n        sameUniversity.push(party);\r\n      } else {\r\n        others.push(party);\r\n      }\r\n    }\r\n\r\n    return [...friends, ...sameUniversity, ...others];\r\n  }, [filteredParties, viewerUniversity]);\r\n\r\n  const isLoading = loading || isCheckingProfile || partiesLoading;\r\n\r\n  return {\r\n    // State\r\n    welcomeName,\r\n    isLoading,\r\n    orderedParties,\r\n    \r\n    // Data refresh\r\n    refreshParties: fetchParties,\r\n    \r\n    // Filters\r\n    destinationQuery,\r\n    setDestinationQuery,\r\n    timeWindowMins,\r\n    setTimeWindowMins,\r\n    sameDepartment,\r\n    setSameDepartment,\r\n    sameYear,\r\n    setSameYear,\r\n    showFriendsOnly,\r\n    setShowFriendsOnly,\r\n    showMyUniversityOnly,\r\n    setShowMyUniversityOnly,\r\n  };\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4252, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/91971/Desktop/Projects/meet-riders/frontend/src/app/%28main%29/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport HostButton from \"@/components/ui/hostbutton\";\r\nimport DashboardHeader from \"./components/DashboardHeader\";\r\nimport RidesList from \"./components/RidesList\";\r\nimport LoadingScreen from \"./components/LoadingScreen\";\r\nimport SoiList from \"./components/SoiList\";\r\nimport ExpiredPanel from \"./components/ExpiredPanel\";\r\nimport { useDashboard } from \"./hooks/useDashboard\";\r\n\r\nexport default function HomePage() {\r\n  const {\r\n    welcomeName,\r\n    isLoading,\r\n    orderedParties,\r\n    refreshParties,\r\n    destinationQuery,\r\n    setDestinationQuery,\r\n    timeWindowMins,\r\n    setTimeWindowMins,\r\n    sameDepartment,\r\n    setSameDepartment,\r\n    sameYear,\r\n    setSameYear,\r\n    showFriendsOnly,\r\n    setShowFriendsOnly,\r\n    showMyUniversityOnly,\r\n    setShowMyUniversityOnly,\r\n  } = useDashboard();\r\n\r\n  if (isLoading) {\r\n    return <LoadingScreen />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <HostButton />\r\n\r\n      <DashboardHeader\r\n        welcomeName={welcomeName}\r\n        destinationQuery={destinationQuery}\r\n        onDestinationQueryChange={setDestinationQuery}\r\n        timeWindowMins={timeWindowMins}\r\n        onTimeWindowChange={setTimeWindowMins}\r\n        sameDepartment={sameDepartment}\r\n        onSameDepartmentChange={setSameDepartment}\r\n        sameYear={sameYear}\r\n        onSameYearChange={setSameYear}\r\n        showFriendsOnly={showFriendsOnly}\r\n        onShowFriendsOnlyChange={setShowFriendsOnly}\r\n        showMyUniversityOnly={showMyUniversityOnly}\r\n        onShowMyUniversityOnlyChange={setShowMyUniversityOnly}\r\n      />\r\n\r\n      <div className=\"mt-6 grid grid-cols-1 xl:grid-cols-[1fr_320px] gap-6 items-start\">\r\n        <div>\r\n          <RidesList \r\n            parties={orderedParties} \r\n            onPartyUpdate={refreshParties}\r\n          />\r\n\r\n          <div className=\"mt-10\">\r\n            <h2 className=\"text-2xl font-semibold text-card-foreground mb-4\">Upcoming Rides (SOI)</h2>\r\n            <SoiList />\r\n          </div>\r\n        </div>\r\n        <ExpiredPanel />\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;AAUe,SAAS;IACtB,MAAM,EACJ,WAAW,EACX,SAAS,EACT,cAAc,EACd,cAAc,EACd,gBAAgB,EAChB,mBAAmB,EACnB,cAAc,EACd,iBAAiB,EACjB,cAAc,EACd,iBAAiB,EACjB,QAAQ,EACR,WAAW,EACX,eAAe,EACf,kBAAkB,EAClB,oBAAoB,EACpB,uBAAuB,EACxB,GAAG,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IAEf,IAAI,WAAW;QACb,qBAAO,8OAAC,mKAAA,CAAA,UAAa;;;;;IACvB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,sIAAA,CAAA,UAAU;;;;;0BAEX,8OAAC,qKAAA,CAAA,UAAe;gBACd,aAAa;gBACb,kBAAkB;gBAClB,0BAA0B;gBAC1B,gBAAgB;gBAChB,oBAAoB;gBACpB,gBAAgB;gBAChB,wBAAwB;gBACxB,UAAU;gBACV,kBAAkB;gBAClB,iBAAiB;gBACjB,yBAAyB;gBACzB,sBAAsB;gBACtB,8BAA8B;;;;;;0BAGhC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC,+JAAA,CAAA,UAAS;gCACR,SAAS;gCACT,eAAe;;;;;;0CAGjB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAAmD;;;;;;kDACjE,8OAAC,6JAAA,CAAA,UAAO;;;;;;;;;;;;;;;;;kCAGZ,8OAAC,kKAAA,CAAA,UAAY;;;;;;;;;;;;;;;;;AAIrB","debugId":null}}]
}